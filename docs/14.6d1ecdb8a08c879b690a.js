(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"4iqE":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=function(e){return e[e.ADD=0]="ADD",e[e.EDIT=1]="EDIT",e[e.READ_ONLY=2]="READ_ONLY",e[e.CLONE=3]="CLONE",e}({}),i=function(e){return e[e.CREATE=0]="CREATE",e[e.UPDATE=1]="UPDATE",e[e.SUBMIT=2]="SUBMIT",e[e.APPROVE=3]="APPROVE",e[e.REJECT=4]="REJECT",e[e.DELETE=5]="DELETE",e[e.CANCEL=6]="CANCEL",e[e.DISCARD=7]="DISCARD",e}({})},EbFV:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("0o5J"),i=n("TYT/"),o=function(){function e(e){this.webApiProvier=e}return e.prototype.getProductTypes=function(){return this.webApiProvier.get("product/v1/list",!0)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](r.c))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"Jq/4":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("26FU"),i=n("67Y/"),o=n("0o5J"),a=n("TYT/"),l=n("qT8p"),c=function(){function e(e,t){this.toastr=e,this.webApiProvider=t,this.onDepotSelected=new r.a(null),this.onAdvancedSearchApplied=new r.a(null),this.onClearSearchApplied=new r.a(null)}return e.prototype.loadDepotData=function(e,t){return this.loadDepotDataNoPagination(e,t)},e.prototype.loadDepotDataNoPagination=function(e,t){return this.getAllDepotsNoPagination()},e.prototype.create=function(e){return this.webApiProvider.post("depot/v1/",e,!0)},e.prototype.update=function(e){return this.webApiProvider.put("depot/v1/"+e.id,e)},e.prototype.delete=function(e){return this.webApiProvider.delete("depot/v1/"+e,!0)},e.prototype.getAllDepots=function(e,t){return this.webApiProvider.get("depot/v1/allDepots/",!0)},e.prototype.getAllDepotsPaginated=function(e,t){return this.webApiProvider.get("depot/v1/list/"+e+"/"+t,!0)},e.prototype.getAllDepotsNoPagination=function(){return this.webApiProvider.get("depot/v1/allDepots",!0)},e.prototype.getAllTanksForDepot=function(e){return this.webApiProvider.post("depot/v1/depottanks/"+e,null,!0)},e.prototype.selectDepot=function(e){this.loadingCollection=!0,this.loadingData=!0,this.delay(500),this.onDepotSelected.next({depot:e}),this.loadingData=!1},e.prototype.delay=function(e){return new Promise((function(t){return setTimeout(t,e)}))},e.prototype.loadDepotById=function(e){var t=this;return this.loadingData=!0,this.getDepotById(e).pipe(Object(i.a)((function(e){return t.onDepotSelected.next({depot:e}),t.loadingData=!1,e})))},e.prototype.getDepotById=function(e){return this.webApiProvider.get("depot/v1/"+e)},e.prototype.performAdvancedSearch=function(e){var t=this;this.loadingCollection=!0,this.webApiProvider.get("depot/v1/list/0/6"+e,!0).subscribe((function(e){e&&(t.onAdvancedSearchApplied.next({depots:e}),t.loadingCollection=!1)}),(function(e){t.toastr.error(e.errorMessage,"Failed"),t.loadingCollection=!1}))},e.prototype.performAdvancedSearchPost=function(e){var t=this;this.loadingCollection=!0,this.webApiProvider.postwithSearchParam("depot/v1/depots",e.params).subscribe((function(e){e&&(t.onAdvancedSearchApplied.next({depots:e}),t.loadingCollection=!1)}),(function(e){t.toastr.error(e.errorMessage,"Failed"),t.loadingCollection=!1}))},e.prototype.getProductsForDepot=function(e){return this.webApiProvider.post("depot/v1/depotprods?depotId="+e,null,!0)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275inject"](l.b),a["\u0275\u0275inject"](o.c))},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},TkLX:function(e,t,n){"use strict";n.r(t);var r=n("Valr"),i=n("26FU"),o=n("0o5J"),a=(n("RDlK"),n("TYT/")),l=n("qT8p"),c=function(){function e(e,t){this.toastr=e,this.webApiProvider=t,this.onBalanceSelected=new i.a(null),this.onAdvancedSearchApplied=new i.a(null),this.onClearSearchApplied=new i.a(null)}return e.prototype.loadBalanceData=function(e,t){return this.getAllBalances(e-1,t)},e.prototype.create=function(e){return this.webApiProvider.post("inventory/v1",e,!0)},e.prototype.update=function(e){return this.webApiProvider.put("inventory/v1/",e)},e.prototype.getAllBalances=function(e,t){return this.webApiProvider.get("inventory/v1/list/"+e+"/"+t,!0)},e.prototype.getBalanceForClientDepotAndProduct=function(e,t,n){return this.webApiProvider.get("inventory/v1/"+e+"/"+t+"/"+n,!0)},e.prototype.search=function(e,t,n){return this.webApiProvider.getwithSearchParam("inventory/v1/list/"+e+"/"+t,n.params)},e.prototype.selectBalance=function(e){this.onBalanceSelected.next({balance:e})},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275inject"](l.b),a["\u0275\u0275inject"](o.c))},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),s=n("he9t"),d=n("EbFV"),p=n("Jq/4"),u=n("oR8h"),m=function(){return function(e){Object.assign(this,e)}}(),f=n("DUip"),h=n("QJY3"),v=n("MnXN"),b=n("1PnN"),g=n("3rkx");function S(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",32),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](),a["\u0275\u0275reference"](53).click()})),a["\u0275\u0275text"](1,"Click to add"),a["\u0275\u0275elementEnd"]()}}function y(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"span"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.fileName," ")}}function E(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"i",33),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().attachedFile=null})),a["\u0275\u0275elementEnd"]()}}function C(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275element"](1,"app-spinner-wrapper",34),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("showSpinner",n.showProgress)}}var w=function(){return{"w-100":!0}},A=function(){function e(e,t,n,r,i,o,a,l,c,s){this.clientService=e,this.balanceService=t,this.depotService=n,this.productService=r,this.router=i,this.constants=o,this.route=a,this.fb=l,this.modalService=c,this.toastr=s,this.clients=[],this.depots=[],this.products=[],this.showProgress=!1,this.fileName="",this.adjustmentTypes=[{value:"DEBIT",display:"Debit"},{value:"CREDIT",display:"Credit"}],this.balanceAdjustmentRequest=new m}return e.prototype.ngOnInit=function(){this.showProgress=!0,this.header="Adjust balance",this.prepareObj(),this.loadBasicDetails(),this.setForm(this.balanceAdjustmentRequest),this.balAdjustForm.controls.clientId.disable(),this.balAdjustForm.controls.depotId.disable(),this.balAdjustForm.controls.productId.disable(),this.showProgress=!1},e.prototype.loadBasicDetails=function(){var e=this;this.clientService.getMainAndSubClientsNoPagination().subscribe((function(t){e.clients=t})),this.depotService.getAllDepotsNoPagination().subscribe((function(t){e.depots=t.data.depots})),this.productService.getProductTypes().subscribe((function(t){e.products=t}))},e.prototype.prepareObj=function(){this.balanceAdjustmentRequest.clientId=this.balance.clientId,this.balanceAdjustmentRequest.depotId=this.balance.depotId,this.balanceAdjustmentRequest.productId=this.balance.productId},e.prototype.setForm=function(e){this.balAdjustForm=this.fb.group({clientId:e.clientId,depotId:e.depotId,productId:e.productId,agreement:null,quantity:0,referenceNo:null,adjustmentType:null,currentBalance:this.balance.actualBalance})},e.prototype.onFileChange=function(e){var t=this;this.fileName="";var n=new FileReader;if(e.target.files&&e.target.files.length>0){var r=e.target.files[0];this.attachedFile=r,this.fileName=r.name,n.readAsDataURL(r),n.onload=function(){t.balAdjustForm.get("agreement").setValue({id:null,name:r.name,content:n.result.split(",")[1]})}}},e.prototype.save=function(){var e=this;this.showProgress=!0,this.balanceAdjustmentRequest=this.balAdjustForm.value,this.balanceService.update(this.balanceAdjustmentRequest).subscribe((function(t){e.toastr.success("Balance adjusted successfully !","Success",{timeOut:4e3}),e.showProgress=!1}),(function(t){JSON.parse(t.error),e.toastr.error("Something went wrong !","Failed",{timeOut:4e3}),e.showProgress=!1}))},e.prototype.cancel=function(){this.router.navigate(["inventory/balance"])},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](u.a),a["\u0275\u0275directiveInject"](c),a["\u0275\u0275directiveInject"](p.a),a["\u0275\u0275directiveInject"](d.a),a["\u0275\u0275directiveInject"](f.h),a["\u0275\u0275directiveInject"](s.a),a["\u0275\u0275directiveInject"](f.a),a["\u0275\u0275directiveInject"](h.FormBuilder),a["\u0275\u0275directiveInject"](v.m),a["\u0275\u0275directiveInject"](l.b))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-balance-adjustment-editor"]],inputs:{balance:"balance"},decls:68,vars:22,consts:[[1,"breadcrumb"],[1,"row"],[1,"col-lg-9"],[3,"formGroup"],[1,"border-top","mb-5"],[1,"form-group","row"],["for","client",1,"col-md-3","col-form-label","required"],[1,"col-md-4","input-group"],["bindLabel","name","bindValue","id","placeholder","Select client","formControlName","clientId",3,"items","multiple","ngClass"],["for","depot",1,"col-md-3","col-form-label","required"],["bindLabel","name","bindValue","id","placeholder","Select depot","formControlName","depotId",3,"items","multiple","ngClass"],["bindLabel","name","bindValue","id","placeholder","Select product type","formControlName","productId",3,"items","multiple","ngClass"],["for","client",1,"col-md-3","col-form-label"],[1,"col-md-4","input-group","mb-3"],["type","text","formControlName","currentBalance","disabled","",1,"form-control"],[1,"input-group-append"],["id","basic-addon1",1,"input-group-text"],["bindLabel","display","bindValue","value","placeholder","Select adjustment type","formControlName","adjustmentType","required","",3,"items","multiple","ngClass"],["type","text","formControlName","quantity",1,"form-control"],["type","nubmer","formControlName","referenceNo",1,"form-control"],["for","attachment",1,"col-md-3","col-form-label"],[1,"col-md-3"],["hidden","","type","file",3,"change"],["attachmentFileInput","","fileInput",""],["color","primary","class","btn btn-light",3,"click",4,"ngIf"],[4,"ngIf"],["class","fas fa-trash pull-right justify-content-center pointer pt-1",3,"click",4,"ngIf"],[1,"col-sm-10","btn-toolbar"],["type","submit","placement","top","placement","top","ngbTooltip","Save the dispatch","triggers","mouseenter:mouseleave",1,"btn","btn-primary","mr-2",3,"click"],["aria-hidden","true",1,"fa","fa-floppy-o","mr-2"],["type","button","placement","top","ngbTooltip","Cancel the dispatch","triggers","mouseenter:mouseleave",1,"btn","btn-outline-primary","mr-2",3,"click"],[1,"fa","fa-ban","mr-2"],["color","primary",1,"btn","btn-light",3,"click"],[1,"fas","fa-trash","pull-right","justify-content-center","pointer","pt-1",3,"click"],[3,"showSpinner"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"h1"),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"div",1),a["\u0275\u0275elementStart"](4,"div",2),a["\u0275\u0275elementStart"](5,"form",3),a["\u0275\u0275element"](6,"div",4),a["\u0275\u0275elementStart"](7,"div",5),a["\u0275\u0275elementStart"](8,"label",6),a["\u0275\u0275text"](9,"Client *"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"div",7),a["\u0275\u0275element"](11,"ng-select",8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"div",5),a["\u0275\u0275elementStart"](13,"label",9),a["\u0275\u0275text"](14,"Depot *"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"div",7),a["\u0275\u0275element"](16,"ng-select",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"div",5),a["\u0275\u0275elementStart"](18,"label",6),a["\u0275\u0275text"](19,"Product type *"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](20,"div",7),a["\u0275\u0275element"](21,"ng-select",11),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"div",5),a["\u0275\u0275elementStart"](23,"label",12),a["\u0275\u0275text"](24,"Current balance"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](25,"div",13),a["\u0275\u0275element"](26,"input",14),a["\u0275\u0275elementStart"](27,"div",15),a["\u0275\u0275elementStart"](28,"span",16),a["\u0275\u0275text"](29,"Liters"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](30,"div",5),a["\u0275\u0275elementStart"](31,"label",6),a["\u0275\u0275text"](32,"Adjustment type *"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](33,"div",7),a["\u0275\u0275element"](34,"ng-select",17),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](35,"div",5),a["\u0275\u0275elementStart"](36,"label",6),a["\u0275\u0275text"](37,"Adjustment quantity *"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](38,"div",13),a["\u0275\u0275element"](39,"input",18),a["\u0275\u0275elementStart"](40,"div",15),a["\u0275\u0275elementStart"](41,"span",16),a["\u0275\u0275text"](42,"Liters"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](43,"div",5),a["\u0275\u0275elementStart"](44,"label",6),a["\u0275\u0275text"](45,"Reference No *"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](46,"div",7),a["\u0275\u0275element"](47,"input",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](48,"div",5),a["\u0275\u0275elementStart"](49,"label",20),a["\u0275\u0275text"](50,"Adivce or Adjustment Agreement *"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](51,"div",21),a["\u0275\u0275elementStart"](52,"input",22,23),a["\u0275\u0275listener"]("change",(function(e){return t.onFileChange(e)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](55,S,2,0,"button",24),a["\u0275\u0275template"](56,y,2,1,"span",25),a["\u0275\u0275template"](57,E,1,0,"i",26),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](58,"div",4),a["\u0275\u0275elementStart"](59,"div",5),a["\u0275\u0275elementStart"](60,"div",27),a["\u0275\u0275elementStart"](61,"button",28),a["\u0275\u0275listener"]("click",(function(){return t.save()})),a["\u0275\u0275element"](62,"i",29),a["\u0275\u0275text"](63,"Save"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](64,"button",30),a["\u0275\u0275listener"]("click",(function(){return t.cancel()})),a["\u0275\u0275element"](65,"i",31),a["\u0275\u0275text"](66,"Cancel"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](67,C,2,1,"div",25),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](t.header),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("formGroup",t.balAdjustForm),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("items",t.clients)("multiple",!1)("ngClass",a["\u0275\u0275pureFunction0"](18,w)),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("items",t.depots)("multiple",!1)("ngClass",a["\u0275\u0275pureFunction0"](19,w)),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("items",t.products)("multiple",!1)("ngClass",a["\u0275\u0275pureFunction0"](20,w)),a["\u0275\u0275advance"](13),a["\u0275\u0275property"]("items",t.adjustmentTypes)("multiple",!1)("ngClass",a["\u0275\u0275pureFunction0"](21,w)),a["\u0275\u0275advance"](21),a["\u0275\u0275property"]("ngIf",!t.attachedFile),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.attachedFile),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.attachedFile),a["\u0275\u0275advance"](10),a["\u0275\u0275property"]("ngIf",t.showProgress))},directives:[h["\u0275angular_packages_forms_forms_y"],h.NgControlStatusGroup,h.FormGroupDirective,b.a,h.NgControlStatus,h.FormControlName,r.n,h.DefaultValueAccessor,h.RequiredValidator,r.p,v.z,g.a],styles:[""]}),e}(),I=function(){function e(e){this.balanceService=e}return e.prototype.ngOnInit=function(){var e=this;this.selectBalanceSub=this.balanceService.onBalanceSelected.subscribe((function(t){e.balance=t.balance}))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](c))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-adjust"]],decls:1,vars:1,consts:[[3,"balance"]],template:function(e,t){1&e&&a["\u0275\u0275element"](0,"app-balance-adjustment-editor",0),2&e&&a["\u0275\u0275property"]("balance",t.balance)},directives:[A],styles:[""]}),e}(),P=n("mB2O"),D=n("Gi3i"),j=n("cUzu");function x(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"tr"),a["\u0275\u0275elementStart"](1,"td"),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"td"),a["\u0275\u0275text"](4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"td"),a["\u0275\u0275text"](6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"td"),a["\u0275\u0275text"](8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"td"),a["\u0275\u0275text"](10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"td"),a["\u0275\u0275elementStart"](12,"button",21),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var e=t.$implicit;return a["\u0275\u0275nextContext"]().adjustBalance(e)})),a["\u0275\u0275element"](13,"i",22),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",r.clientName," "),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",r.depotName," "),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",r.productName," "),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",r.availableBalance," "),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",r.actualBalance," ")}}function F(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275element"](1,"app-spinner-wrapper",23),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("showSpinner",n.showProgress)}}var N=function(){function e(e,t,n,r,i,o){var a=this;this.productService=e,this.balanceService=t,this.productTypeService=n,this.constants=r,this.router=i,this.route=o,this.showProgress=!1,this.balances=[],this.page=1,this.pageSize=this.constants.pageSize,this.clientControl=new h.FormControl,this.depotControl=new h.FormControl,this.productControl=new h.FormControl,this.availableControl=new h.FormControl,this.actualControl=new h.FormControl,this.clientId=null,this.depotId=null,this.productId=null,this.productTypeService.getProductTypes().subscribe((function(e){a.products=e}))}return e.prototype.ngOnInit=function(){var e=this;this.showProgress=!0,this.balanceService.getAllBalances(this.page-1,this.pageSize).subscribe((function(t){e.balances=t.content,e.collectionSize=t.totalElements,e.showProgress=!1})),this.clientControl.valueChanges.pipe(Object(D.a)(200)).subscribe((function(t){e.filterData()})),this.depotControl.valueChanges.pipe(Object(D.a)(200)).subscribe((function(t){e.filterData()})),this.productControl.valueChanges.pipe(Object(D.a)(200)).subscribe((function(t){e.filterData()})),this.productControl.valueChanges.pipe(Object(D.a)(200)).subscribe((function(t){e.filterData()}))},e.prototype.filterData=function(){var e=this,t=this.clientControl.value,n=this.depotControl.value,r=this.productControl.value,i={params:(new j.f).set("clientName",t||"").set("depotName",n||"").set("productId",r||"")};this.balanceService.search(this.page-1,this.pageSize,i).subscribe((function(t){e.balances=t.content,e.collectionSize=t.totalElements}))},e.prototype.getPageFromService=function(e){var t=this;this.showProgress=!0,this.balanceService.getAllBalances(e-1,this.pageSize).subscribe((function(e){t.balances=e.content,t.collectionSize=e.totalElements,t.showProgress=!1}),(function(e){console.log(e.error),t.showProgress=!1}))},e.prototype.newOpeningBalance=function(){this.router.navigate(["add"],{relativeTo:this.route})},e.prototype.adjustBalance=function(e){this.balanceService.selectBalance(e),this.router.navigate(["adjust"],{relativeTo:this.route})},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](P.a),a["\u0275\u0275directiveInject"](c),a["\u0275\u0275directiveInject"](d.a),a["\u0275\u0275directiveInject"](s.a),a["\u0275\u0275directiveInject"](f.h),a["\u0275\u0275directiveInject"](f.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-balance"]],decls:45,vars:15,consts:[[1,""],[1,"breadcrumb"],[1,"separator-breadcrumb","border-top"],[1,"row","no-margin","mt-3"],[1,"card","card-body"],[1,"row","justify-content-end","mb-3","pl-10"],["type","button",1,"btn","btn-primary",3,"click"],[1,"table","table-striped"],["scope","col"],[1,"pl-0"],[1,"form-group","m-0","flex-grow-1","pl-0"],["id","search","placeholder","Search client name",1,"form-control",3,"formControl"],[1,"form-group","m-0","flex-grow-1"],["id","search","placeholder","Search depot name",1,"form-control",3,"formControl"],["bindLabel","name","bindValue","id","placeholder","Select product",3,"items","multiple","formControl"],["id","search","placeholder","Search avilable balance",1,"form-control",3,"formControl"],["id","search","placeholder","Search actual balance",1,"form-control",3,"formControl"],[4,"ngFor","ngForOf"],[1,"row","no-margin","pagination-div","border-rightr","justify-content-center"],["aria-label","Default pagination",3,"collectionSize","page","pageSize","maxSize","ellipses","boundaryLinks","pageChange"],[4,"ngIf"],["type","button",1,"btn","btn-outline-primary",3,"click"],["aria-hidden","true",1,"fa","fa-sliders"],[3,"showSpinner"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"h1"),a["\u0275\u0275text"](3,"Inventory balance"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"div",2),a["\u0275\u0275elementStart"](5,"div",3),a["\u0275\u0275elementStart"](6,"div",4),a["\u0275\u0275elementStart"](7,"div",5),a["\u0275\u0275elementStart"](8,"button",6),a["\u0275\u0275listener"]("click",(function(){return t.newOpeningBalance()})),a["\u0275\u0275text"](9,"New"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"table",7),a["\u0275\u0275elementStart"](11,"thead"),a["\u0275\u0275elementStart"](12,"tr"),a["\u0275\u0275elementStart"](13,"th",8),a["\u0275\u0275text"](14,"Client"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"th",8),a["\u0275\u0275text"](16,"Depot"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"th",8),a["\u0275\u0275text"](18,"Product"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"th",8),a["\u0275\u0275text"](20,"Available balance"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"th",8),a["\u0275\u0275text"](22,"Actual balance"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](23,"th",8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](24,"tr"),a["\u0275\u0275elementStart"](25,"td",9),a["\u0275\u0275elementStart"](26,"div",10),a["\u0275\u0275element"](27,"input",11),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"td",9),a["\u0275\u0275elementStart"](29,"div",12),a["\u0275\u0275element"](30,"input",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](31,"td",9),a["\u0275\u0275elementStart"](32,"div",12),a["\u0275\u0275element"](33,"ng-select",14),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](34,"td",9),a["\u0275\u0275elementStart"](35,"div",12),a["\u0275\u0275element"](36,"input",15),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](37,"td",9),a["\u0275\u0275elementStart"](38,"div",12),a["\u0275\u0275element"](39,"input",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](40,"tbody"),a["\u0275\u0275template"](41,x,14,5,"tr",17),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](42,"div",18),a["\u0275\u0275elementStart"](43,"ngb-pagination",19),a["\u0275\u0275listener"]("pageChange",(function(e){return t.page=e}))("pageChange",(function(e){return t.getPageFromService(e)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](44,F,2,1,"div",20),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](27),a["\u0275\u0275property"]("formControl",t.clientControl),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("formControl",t.depotControl),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("items",t.products)("multiple",!1)("formControl",t.productControl),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("formControl",t.availableControl),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("formControl",t.actualControl),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",t.balances),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("collectionSize",t.collectionSize)("page",t.page)("pageSize",t.pageSize)("maxSize",4)("ellipses",!0)("boundaryLinks",!0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.showProgress))},directives:[h.DefaultValueAccessor,h.NgControlStatus,h.FormControlDirective,b.a,r.o,v.o,r.p,g.a],styles:[""]}),e}(),T=n("4iqE"),k=n("zDFo");function B(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",30),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](),a["\u0275\u0275reference"](37).click()})),a["\u0275\u0275text"](1,"Click to add"),a["\u0275\u0275elementEnd"]()}}function L(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"span"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.fileName," ")}}function O(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"i",31),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().attachedFile=null})),a["\u0275\u0275elementEnd"]()}}function R(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275element"](1,"app-spinner-wrapper",32),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("showSpinner",n.showProgress)}}var V=function(){return{"w-100":!0}},_=function(){function e(e,t,n,r,i,o,a,l,c,s){this.clientService=e,this.balanceService=t,this.depotService=n,this.productService=r,this.router=i,this.constants=o,this.route=a,this.fb=l,this.modalService=c,this.toastr=s,this.showProgress=!1,this.fileName="",this.setForm()}return e.prototype.ngOnInit=function(){var e=this;this.showProgress=!0,this.header=this.action===T.a.ADD||this.action===T.a.CLONE?"New Opening Balance":"Adjust Balance",this.route.params.subscribe((function(t){return e.balanceId=t.id})),this.clientService.getMainAndSubClientsNoPagination().subscribe((function(t){e.clients=t})),this.depotService.getAllDepotsNoPagination().subscribe((function(t){e.depots=t.data.depots})),this.productService.getProductTypes().subscribe((function(t){e.productTypes=t})),this.showProgress=!1},e.prototype.loadDepot=function(e){var t=this;this.showProgress=!0;var n=e.id;""!==n&&this.clientService.getDepotForClient(n).subscribe((function(e){t.depots=e.data.depots.map((function(e){return{id:e.id,name:e.name}})),t.showProgress=!1})),this.showProgress=!1},e.prototype.openClientSearch=function(){var e=this,t=this.modalService.open(k.a,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"md"});t.componentInstance.modalTitle="Select client",t.componentInstance.clientType="MAIN_CLIENT",t.result.then((function(t){t.status?e.balanceForm.get("client").setValue(t.client.id):console.log("Modal closed")}))},e.prototype.onFileChange=function(e){var t=this;this.fileName="";var n=new FileReader;if(e.target.files&&e.target.files.length>0){var r=e.target.files[0];this.attachedFile=r,this.fileName=r.name,n.readAsDataURL(r),n.onload=function(){t.balanceForm.get("agreement").setValue({id:null,name:r.name,content:n.result.split(",")[1]})}}},e.prototype.save=function(){var e=this;this.showProgress=!0,this.balanceService.create(this.balanceForm.value).subscribe((function(t){e.toastr.success("Opening balance successfully created","Success",{timeOut:4e3}),e.showProgress=!1}),(function(t){var n=JSON.parse(t.error);e.toastr.error(n.errorMessage,"Failed",{timeOut:4e3}),e.showProgress=!1}))},e.prototype.cancel=function(){this.router.navigate(["inventory/balance"])},e.prototype.setForm=function(){this.balanceForm=this.fb.group({clientId:null,depotId:null,agreement:null,openingBalance:0,productId:null})},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](u.a),a["\u0275\u0275directiveInject"](c),a["\u0275\u0275directiveInject"](p.a),a["\u0275\u0275directiveInject"](d.a),a["\u0275\u0275directiveInject"](f.h),a["\u0275\u0275directiveInject"](s.a),a["\u0275\u0275directiveInject"](f.a),a["\u0275\u0275directiveInject"](h.FormBuilder),a["\u0275\u0275directiveInject"](v.m),a["\u0275\u0275directiveInject"](l.b))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-balance-editor"]],inputs:{action:"action",balanceId:"balanceId"},decls:52,vars:18,consts:[[1,"breadcrumb"],[1,"row"],[1,"col-lg-9"],[3,"formGroup"],[1,"border-top","mb-5"],[1,"form-group","row"],["for","client",1,"col-md-2","col-form-label","required"],[1,"col-md-4","input-group"],["bindLabel","name","bindValue","id","placeholder","Select client","formControlName","clientId","required","",3,"items","multiple","ngClass"],[1,"col-md-1","no-margin","pointer","p-0",3,"click"],[1,"fa","fa-search","mt-2"],["for","depot",1,"col-md-2","col-form-label","required"],["bindLabel","name","bindValue","id","placeholder","Select depot","formControlName","depotId","required","",3,"items","multiple","ngClass"],["bindLabel","name","bindValue","id","placeholder","Select product type","formControlName","productId","required","",3,"items","multiple","ngClass"],[1,"col-md-4","input-group","mb-3"],["type","number","formControlName","openingBalance",1,"form-control"],[1,"input-group-append"],["id","basic-addon1",1,"input-group-text"],["for","attachment",1,"col-md-2","col-form-label"],[1,"col-md-3"],["hidden","","type","file",3,"change"],["attachmentFileInput","","fileInput",""],["color","primary","class","btn btn-light",3,"click",4,"ngIf"],[4,"ngIf"],["class","fas fa-trash pull-right justify-content-center pointer pt-1",3,"click",4,"ngIf"],[1,"col-sm-10","btn-toolbar"],["type","submit","placement","top","placement","top","ngbTooltip","Save the dispatch","triggers","mouseenter:mouseleave",1,"btn","btn-primary","mr-2",3,"click"],["aria-hidden","true",1,"fa","fa-floppy-o","mr-2"],["type","button","placement","top","ngbTooltip","Cancel the dispatch","triggers","mouseenter:mouseleave",1,"btn","btn-outline-primary","mr-2",3,"click"],[1,"fa","fa-ban","mr-2"],["color","primary",1,"btn","btn-light",3,"click"],[1,"fas","fa-trash","pull-right","justify-content-center","pointer","pt-1",3,"click"],[3,"showSpinner"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"h1"),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"div",1),a["\u0275\u0275elementStart"](4,"div",2),a["\u0275\u0275elementStart"](5,"form",3),a["\u0275\u0275element"](6,"div",4),a["\u0275\u0275elementStart"](7,"div",5),a["\u0275\u0275elementStart"](8,"label",6),a["\u0275\u0275text"](9,"Client *"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"div",7),a["\u0275\u0275element"](11,"ng-select",8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"div",9),a["\u0275\u0275listener"]("click",(function(){return t.openClientSearch()})),a["\u0275\u0275element"](13,"i",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"div",5),a["\u0275\u0275elementStart"](15,"label",11),a["\u0275\u0275text"](16,"Depot *"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"div",7),a["\u0275\u0275element"](18,"ng-select",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"div",5),a["\u0275\u0275elementStart"](20,"label",6),a["\u0275\u0275text"](21,"Product type *"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"div",7),a["\u0275\u0275element"](23,"ng-select",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](24,"div",5),a["\u0275\u0275elementStart"](25,"label",6),a["\u0275\u0275text"](26,"Opening balance *"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](27,"div",14),a["\u0275\u0275element"](28,"input",15),a["\u0275\u0275elementStart"](29,"div",16),a["\u0275\u0275elementStart"](30,"span",17),a["\u0275\u0275text"](31,"Liters"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](32,"div",5),a["\u0275\u0275elementStart"](33,"label",18),a["\u0275\u0275text"](34,"Attachment *"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](35,"div",19),a["\u0275\u0275elementStart"](36,"input",20,21),a["\u0275\u0275listener"]("change",(function(e){return t.onFileChange(e)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](39,B,2,0,"button",22),a["\u0275\u0275template"](40,L,2,1,"span",23),a["\u0275\u0275template"](41,O,1,0,"i",24),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](42,"div",4),a["\u0275\u0275elementStart"](43,"div",5),a["\u0275\u0275elementStart"](44,"div",25),a["\u0275\u0275elementStart"](45,"button",26),a["\u0275\u0275listener"]("click",(function(){return t.save()})),a["\u0275\u0275element"](46,"i",27),a["\u0275\u0275text"](47,"Save"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](48,"button",28),a["\u0275\u0275listener"]("click",(function(){return t.cancel()})),a["\u0275\u0275element"](49,"i",29),a["\u0275\u0275text"](50,"Cancel"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](51,R,2,1,"div",23),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](t.header),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("formGroup",t.balanceForm),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("items",t.clients)("multiple",!1)("ngClass",a["\u0275\u0275pureFunction0"](15,V)),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("items",t.depots)("multiple",!1)("ngClass",a["\u0275\u0275pureFunction0"](16,V)),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("items",t.productTypes)("multiple",!1)("ngClass",a["\u0275\u0275pureFunction0"](17,V)),a["\u0275\u0275advance"](16),a["\u0275\u0275property"]("ngIf",!t.attachedFile),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.attachedFile),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.attachedFile),a["\u0275\u0275advance"](10),a["\u0275\u0275property"]("ngIf",t.showProgress))},directives:[h["\u0275angular_packages_forms_forms_y"],h.NgControlStatusGroup,h.FormGroupDirective,b.a,h.NgControlStatus,h.FormControlName,h.RequiredValidator,r.n,h.NumberValueAccessor,h.DefaultValueAccessor,r.p,v.z,g.a],styles:[""]}),e}(),q=[{path:"",component:N},{path:"add",component:function(){function e(){this.action=T.a.ADD}return e.prototype.ngOnInit=function(){},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-add"]],decls:1,vars:1,consts:[[3,"action"]],template:function(e,t){1&e&&a["\u0275\u0275element"](0,"app-balance-editor",0),2&e&&a["\u0275\u0275property"]("action",t.action)},directives:[_],styles:[""]}),e}()},{path:"adjust",component:I}],M=function(){function e(){}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[f.l.forChild(q)],f.l]}),e}(),z=n("oOf3"),U=n("X2FZ"),Y=n("jgPy"),J=n("jASi");n.d(t,"InventoryModule",(function(){return G}));var G=function(){function e(){}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.c,M,h.FormsModule,h.ReactiveFormsModule,z.a,U.e,v.n,b.b,Y.a,b.b,J.AppFormsModule]]}),e}()},he9t:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("TYT/"),i=function(){function e(){this.crudStatus=[{code:"ACTIVE",display:"Active"},{code:"INACTIVE",display:"Inactive"}],this.clientTypes=[{code:"MAIN_CLIENT",display:"Main client"},{code:"SUB_CLIENT",display:"Sub client"},{code:"MAIN_SUB_CLIENT",display:"Main and sub client"}],this.yesNoConstants=[{code:!0,display:"Yes"},{code:!1,display:"No"}],this.waybillStatus=[{code:"CREATED",display:"Created"},{code:"CANCELED",display:"Cancelled"},{code:"DELIVERED ",display:"Delivered"}],this.filterAction=[{value:"All",display:"All"},{value:"OPEN",display:"Open"},{value:"SUBMITTED",display:"Submitted"},{value:"APPROVED",display:"Approved"},{value:"REJECTED",display:"Rejected"},{value:"CANCELLED",display:"Cancelled"},{value:"PARTIALLY_EXECUTED",display:"Partially Executed"},{value:"EXECUTED",display:"Executed"},{value:"DISCARDED",display:"Discarded"},{value:"REOPENED",display:"Reopened"},{value:"SUBMIT_SYS_CANCELLED",display:"Submit sys cancelled"},{value:"APPROVE_SYS_CANCELLED",display:"Approve sys cancelled"},{value:"PARTIAL_SYS_CANCELLED",display:"Partial sys cancelled"}],this.transferTypes=[{value:"SWAP",display:"Inter Depot Swap"},{value:"INTRASWAP",display:"Intra Depot Swap"},{value:"RELEASE",display:"Release"}],this.eventTypes=[{id:1,name:"Client contract end"},{id:2,name:"Demo 2"}],this.pageSize=8,this.dispatchPageSize=8}return e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac=function(t){return new(t||e)},providedIn:"root"}),e}()},"no7+":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r,i=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(){return function(){}}(),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(o)},oR8h:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("26FU"),i=n("67Y/"),o=n("0o5J"),a=n("TYT/"),l=n("qT8p"),c=function(){function e(e,t){this.toastr=e,this.webApiProvider=t,this.onClientSelected=new r.a(null),this.onAdvancedSearchApplied=new r.a(null),this.onClearSearchApplied=new r.a(null)}return e.prototype.loadClientData=function(e,t){return this.getAllClients(e-1,t)},e.prototype.create=function(e){return this.webApiProvider.post("client/v1/",e,!0)},e.prototype.update=function(e){return this.webApiProvider.put("client/v1/"+e.id,e)},e.prototype.delete=function(e){return this.webApiProvider.delete("client/v1/"+e,!0)},e.prototype.getAllClients=function(e,t){return this.webApiProvider.get("client/v1/list/"+e+"/"+t,!0)},e.prototype.getMainAndSubClientsNoPagination=function(){return this.webApiProvider.get("client/v1/list?includeSubClients=true",!0)},e.prototype.getAllClientsNoPagination=function(){return this.webApiProvider.get("client/v1/list",!0)},e.prototype.getAllSubClientsForGivenMainClient=function(e){return this.webApiProvider.get("client/v1/list/"+e)},e.prototype.getDepotForClient=function(e){return this.webApiProvider.post("depot/v1/userdepots?clientId="+e,null,!0)},e.prototype.getClientLedger=function(e,t,n){return this.webApiProvider.getwithSearchParam("client/ledger/v1/list/"+e+"/"+t,n.params)},e.prototype.getClientById=function(e){var t=this;return this.loadingData=!0,this.getAllClienById(e).pipe(Object(i.a)((function(e){return t.onClientSelected.next({client:e}),t.loadingData=!1,e})))},e.prototype.selectClient=function(e){return t=this,void 0,r=function(){return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(l){o=[6,l],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,(function(t){switch(t.label){case 0:return this.loadingCollection=!0,this.loadingData=!0,[4,this.delay(1e3)];case 1:return t.sent(),this.onClientSelected.next({client:e}),this.loadingData=!1,[2]}}))},new((n=void 0)||(n=Promise))((function(e,i){function o(e){try{l(r.next(e))}catch(t){i(t)}}function a(e){try{l(r.throw(e))}catch(t){i(t)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}l((r=r.apply(t,[])).next())}));var t,n,r},e.prototype.delay=function(e){return new Promise((function(t){return setTimeout(t,e)}))},e.prototype.getAllClienById=function(e){return this.webApiProvider.get("client/v1/"+e)},e.prototype.getAllClientAssociationGroup=function(){return this.webApiProvider.get("client-assoc-grp/v1/list")},e.prototype.performAdvancedSearch=function(e){var t=this;this.loadingCollection=!0,this.webApiProvider.getwithSearchParam("client/v1/list/0/6",e.params).subscribe((function(e){e&&(t.onAdvancedSearchApplied.next({clients:e}),t.loadingCollection=!1)}),(function(e){t.toastr.error(e.errorMessage,"Failed"),t.loadingCollection=!1}))},e.prototype.search=function(e,t,n){return this.webApiProvider.get("client/v1/list/"+(t-1)+"/"+n+e)},e.prototype.getAllMainClients=function(){return this.webApiProvider.get("client/v1/list",!0)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275inject"](l.b),a["\u0275\u0275inject"](o.c))},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}]);