(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"4iqE":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o=function(t){return t[t.ADD=0]="ADD",t[t.EDIT=1]="EDIT",t[t.READ_ONLY=2]="READ_ONLY",t[t.CLONE=3]="CLONE",t}({})},Iab2:function(t,e,n){var o,a;void 0===(a="function"==typeof(o=function(){"use strict";function e(t,e,n){var o=new XMLHttpRequest;o.open("GET",t),o.responseType="blob",o.onload=function(){r(o.response,e,n)},o.onerror=function(){console.error("could not download file")},o.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,r=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype?function(t,r,i){var c=a.URL||a.webkitURL,u=document.createElement("a");u.download=r=r||t.name||"download",u.rel="noopener","string"==typeof t?(u.href=t,u.origin===location.origin?o(u):n(u.href)?e(t,r,i):o(u,u.target="_blank")):(u.href=c.createObjectURL(t),setTimeout((function(){c.revokeObjectURL(u.href)}),4e4),setTimeout((function(){o(u)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,a,r){if(a=a||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,r),a);else if(n(t))e(t,a,r);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout((function(){o(i)}))}}:function(t,n,o,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,o);var i="application/octet-stream"===t.type,c=/constructor/i.test(a.HTMLElement)||a.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||i&&c)&&"object"==typeof FileReader){var s=new FileReader;s.onloadend=function(){var t=s.result;t=u?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},s.readAsDataURL(t)}else{var p=a.URL||a.webkitURL,l=p.createObjectURL(t);r?r.location=l:location.href=l,r=null,setTimeout((function(){p.revokeObjectURL(l)}),4e4)}});a.saveAs=r.saveAs=r,t.exports=r})?o.apply(e,[]):o)||(t.exports=a)},TwVa:function(t,e,n){},aKbQ:function(t,e,n){"use strict";n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return d}));var o=n("26FU"),a=n("K9Ia"),r=n("dzgT"),i=n("F/XL"),c=n("15JJ"),u=n("67Y/"),s=n("TYT/"),p=n("cUzu"),l=function(){return(l=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},f=function(){return function(){}}(),d=function(){function t(t){this.http=t,this.onContactSelected=new o.a(null),this.onUserUpdated=new a.a,this.onChatSelected=new o.a(null),this.onChatsUpdated=new a.a}return t.prototype.loadChatData=function(){var t=this;return Object(r.a)(this.getAllContacts(),this.getAllChats(),this.getCurrentUser(),(function(e,n,o){t.contacts=e,t.chats=n,t.user=o,t.onUserUpdated.next(o)}))},t.prototype.getChatByContact=function(t){var e=this;this.loadingCollection=!0;var n=this.user.chatInfo.find((function(e){return e.contactId===t}));return n?this.getAllChats().pipe(Object(c.a)((function(o){var a=o.find((function(t){return t.id===n.chatId})),r=e.contacts.find((function(e){return e.id===t}));return e.onChatSelected.next({chatCollection:a,contact:r}),e.loadingCollection=!1,Object(i.a)(a)}))):this.createChatCollection(t).pipe(Object(c.a)((function(n){return e.getChatByContact(t)})))},t.prototype.createChatCollection=function(t){var e=this,n=this.contacts.find((function(e){return e.id===t})),o=(1e9*Math.random()).toString(),a={id:o,chats:[]},r={chatId:o,lastChatTime:new Date,contactId:n.id,contactName:n.name,unread:null};return this.http.post("api/chat-collections",l({},a)).pipe(Object(c.a)((function(t){return e.user.chatInfo.push(r),e.updateUser(e.user).pipe(Object(c.a)((function(t){return e.getCurrentUser().pipe(Object(u.a)((function(t){e.user=t,e.onUserUpdated.next(t)})))})))})))},t.prototype.getAllContacts=function(){return this.http.get("api/contacts")},t.prototype.getAllChats=function(){return this.http.get("api/chat-collections")},t.prototype.getCurrentUser=function(){return this.http.get("api/chat-user").pipe(Object(u.a)((function(t){return t[0]})))},t.prototype.updateUser=function(t){return this.http.put("api/chat-user/"+t.id,l({},t))},t.prototype.updateChats=function(t,e){return this.http.put("api/chat-collections",{id:t,chats:e})},t.prototype.autoReply=function(t){var e=this;setTimeout((function(){e.onChatsUpdated.next(t)}),1500)},t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275inject"](p.c))},t.\u0275prov=s["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},mB2O:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("TYT/"),a=n("cUzu"),r=function(){function t(t){this.http=t}return t.prototype.getProducts=function(){return this.http.get("api/products")},t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275inject"](a.c))},t.\u0275prov=o["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}]);