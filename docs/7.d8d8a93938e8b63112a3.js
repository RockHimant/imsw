(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{Pi1G:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var l,r=n("no7+"),a=(l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t}(r.b)},V5f2:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var l=n("26FU"),r=n("67Y/"),a=n("0o5J"),o=n("TYT/"),i=n("qT8p"),m=function(){function e(e,t){this.toastr=e,this.webApiProvider=t,this.onWaybillSelected=new l.a(null),this.onWaybillPreviewLoad=new l.a(null),this.onAdvancedSearchApplied=new l.a(null),this.onClearSearchApplied=new l.a(null),this.onStatusChanged=new l.a(null)}return e.prototype.loadWaybillData=function(e,t){return this.webApiProvider.postwithSearchParam("waybill/v1/list/"+(e-1)+"/"+t,null)},e.prototype.selectWaybill=function(e){return t=this,void 0,l=function(){return function(e,t){var n,l,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,l&&(r=2&a[0]?l.return:a[0]?l.throw||((r=l.return)&&r.call(l),0):l.next)&&!(r=r.call(l,a[1])).done)return r;switch(l=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,l=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(i){a=[6,i],l=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}}(this,(function(t){switch(t.label){case 0:return this.loadingCollection=!0,this.loadingData=!0,[4,this.delay(1e3)];case 1:return t.sent(),this.onWaybillSelected.next({waybill:e}),this.onWaybillPreviewLoad.next({waybill:e}),this.loadingData=!1,[2]}}))},new((n=void 0)||(n=Promise))((function(e,r){function a(e){try{i(l.next(e))}catch(t){r(t)}}function o(e){try{i(l.throw(e))}catch(t){r(t)}}function i(t){var l;t.done?e(t.value):(l=t.value,l instanceof n?l:new n((function(e){e(l)}))).then(a,o)}i((l=l.apply(t,[])).next())}));var t,n,l},e.prototype.delay=function(e){return new Promise((function(t){return setTimeout(t,e)}))},e.prototype.create=function(e){return this.webApiProvider.post("waybill/v1/",e,!0)},e.prototype.update=function(e){return this.webApiProvider.put("waybill/v1/"+e.id,e)},e.prototype.delete=function(e){return this.webApiProvider.delete("waybill/v1/"+e,!0)},e.prototype.cancel=function(e){return this.webApiProvider.post("waybill/v1/cancel/"+e,null,!0)},e.prototype.push=function(e){return this.webApiProvider.post("waybill/v1/pushWaybill/"+e,null,!0)},e.prototype.getAllWaybill=function(e,t){return this.webApiProvider.get("waybill/v1/list/"+e+"/"+t,!0)},e.prototype.getWaybillByDispatchTruckId=function(e){return this.webApiProvider.get("waybill/v1/dispatch-truck/"+e)},e.prototype.getWaybillByNumber=function(e){return this.webApiProvider.post("waybill/v1/list/0/1?wayBillNo="+e,null,!0)},e.prototype.loadWaybillById=function(e){var t=this;return this.loadingData=!0,this.getAllWaybillById(e).pipe(Object(r.a)((function(e){return t.onWaybillSelected.next({waybill:e}),t.loadingData=!1,e})))},e.prototype.getAllWaybillById=function(e){return this.webApiProvider.get("waybill/v1/"+e)},e.prototype.getAllWaybillNoPagination=function(){return this.webApiProvider.get("waybill/v1/list")},e.prototype.loadDispatchDetails=function(e,t){return this.webApiProvider.get("waybill/v1/dispatch/"+e+"/dispatch-truck/"+t+"?construct=true")},e.prototype.performAdvancedSearch=function(e,t,n){var l=this;this.loadingCollection=!0,this.webApiProvider.postwithSearchParam("waybill/v1/list/"+e+"/"+t,n.params).subscribe((function(e){e&&(l.onAdvancedSearchApplied.next({waybills:e}),l.loadingCollection=!1)}),(function(e){l.toastr.error(e.errorMessage,"Failed"),l.loadingCollection=!1}))},e.prototype.performAdvancedSearchWithQuery=function(e,t,n){var l=this;this.loadingCollection=!0,this.webApiProvider.post("waybill/v1/list/"+e+"/"+t+n,null,!0).subscribe((function(e){e&&(l.onAdvancedSearchApplied.next({waybills:e}),l.loadingCollection=!1)}),(function(e){l.toastr.error(e.errorMessage,"Failed"),l.loadingCollection=!1}))},e.prototype.updateStatus=function(){this.onStatusChanged.next({res:!0})},e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275inject"](i.b),o["\u0275\u0275inject"](a.c))},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},ksVA:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var l=n("Pi1G"),r=n("V5f2"),a=n("9uVP"),o=n("hqYv"),i=n("he9t"),m=n("4iqE"),d=n("TYT/"),s=n("QJY3"),u=n("qT8p"),c=n("Valr"),p=n("3rkx"),b=n("vMEl"),y=n("1PnN"),S=n("MnXN");function f(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275element"](1,"app-spinner-wrapper",9),d["\u0275\u0275elementEnd"]()),2&e){var n=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("showSpinner",n.showProgress)}}function h(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",10),d["\u0275\u0275element"](1,"span",11),d["\u0275\u0275elementStart"](2,"button",12),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().viewMode="print"})),d["\u0275\u0275text"](3,"Cancel"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](4,"btn-loading",13),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().saveWaybill()})),d["\u0275\u0275text"](5,"Save"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}}function v(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",14),d["\u0275\u0275element"](1,"span",11),d["\u0275\u0275elementStart"](2,"button",15),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().print()})),d["\u0275\u0275element"](3,"i",16),d["\u0275\u0275text"](4,"Print"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}}function w(e,t){1&e&&d["\u0275\u0275element"](0,"i",35)}function E(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div",17),d["\u0275\u0275elementStart"](1,"div",0),d["\u0275\u0275elementStart"](2,"div",18),d["\u0275\u0275elementStart"](3,"h4",19),d["\u0275\u0275text"](4,"Waybill Info"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](5,"p",20),d["\u0275\u0275elementStart"](6,"span",21),d["\u0275\u0275text"](7,"WB number:"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](8,"span",22),d["\u0275\u0275text"](9),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](10,"p",20),d["\u0275\u0275elementStart"](11,"span",21),d["\u0275\u0275text"](12,"DOS number:"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](13,"span",22),d["\u0275\u0275text"](14),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](15,"div",18),d["\u0275\u0275elementStart"](16,"h4",19),d["\u0275\u0275text"](17,"Transportation Info"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](18,"p",20),d["\u0275\u0275elementStart"](19,"span",21),d["\u0275\u0275text"](20,"Transporter:"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](21,"span",22),d["\u0275\u0275text"](22),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](23,"p",20),d["\u0275\u0275elementStart"](24,"span",21),d["\u0275\u0275text"](25,"Truck #:"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](26,"span",22),d["\u0275\u0275text"](27),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](28,"p",20),d["\u0275\u0275elementStart"](29,"span",21),d["\u0275\u0275text"](30,"Driver :"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](31,"span",22),d["\u0275\u0275text"](32),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](33,"div",18),d["\u0275\u0275elementStart"](34,"h4",19),d["\u0275\u0275text"](35,"\xa0"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](36,"p",20),d["\u0275\u0275elementStart"](37,"span",21),d["\u0275\u0275text"](38,"Owner:"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](39,"span",22),d["\u0275\u0275text"](40),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](41,"p",20),d["\u0275\u0275elementStart"](42,"span",21),d["\u0275\u0275text"](43,"Reference #:"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](44,"span",22),d["\u0275\u0275text"](45),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](46,"p",20),d["\u0275\u0275elementStart"](47,"span",21),d["\u0275\u0275text"](48,"Date :"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](49,"span",22),d["\u0275\u0275text"](50),d["\u0275\u0275pipe"](51,"date"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](52,"div",23),d["\u0275\u0275elementStart"](53,"div",24),d["\u0275\u0275elementStart"](54,"div",25),d["\u0275\u0275elementStart"](55,"h5",19),d["\u0275\u0275text"](56,"Bill To"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](57,"p",26),d["\u0275\u0275text"](58),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](59,"p",26),d["\u0275\u0275text"](60),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](61,"p",26),d["\u0275\u0275text"](62),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](63,"p",26),d["\u0275\u0275text"](64),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](65,"p",26),d["\u0275\u0275text"](66),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](67,"p",26),d["\u0275\u0275text"](68),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](69,"p",26),d["\u0275\u0275template"](70,w,1,0,"i",27),d["\u0275\u0275text"](71),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](72,"div",25),d["\u0275\u0275elementStart"](73,"h5",19),d["\u0275\u0275text"](74,"\xa0"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](75,"p",20),d["\u0275\u0275elementStart"](76,"span",21),d["\u0275\u0275text"](77,"Temperature :"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](78,"span",28),d["\u0275\u0275text"](79),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](80,"p",20),d["\u0275\u0275elementStart"](81,"span",21),d["\u0275\u0275text"](82,"Density :"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](83,"span",28),d["\u0275\u0275text"](84),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](85,"div",25),d["\u0275\u0275elementStart"](86,"h5",19),d["\u0275\u0275text"](87,"\xa0"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](88,"p",20),d["\u0275\u0275elementStart"](89,"span",21),d["\u0275\u0275text"](90,"Estimated time to destination(hh:mm:ss) :"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](91,"span",28),d["\u0275\u0275text"](92),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](93,"p",20),d["\u0275\u0275elementStart"](94,"span",21),d["\u0275\u0275text"](95,"Estimated Distance :"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](96,"span",28),d["\u0275\u0275text"](97),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](98,"div",0),d["\u0275\u0275elementStart"](99,"div",1),d["\u0275\u0275elementStart"](100,"table",29),d["\u0275\u0275elementStart"](101,"thead",30),d["\u0275\u0275elementStart"](102,"tr"),d["\u0275\u0275elementStart"](103,"th",31),d["\u0275\u0275text"](104,"#"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](105,"th",31),d["\u0275\u0275text"](106,"Quantity (liters)"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](107,"th",31),d["\u0275\u0275text"](108,"Ullage (mm)"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](109,"th",31),d["\u0275\u0275text"](110,"Seal Number"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](111,"tbody"),d["\u0275\u0275elementStart"](112,"tr"),d["\u0275\u0275elementStart"](113,"th",32),d["\u0275\u0275text"](114,"1"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](115,"td"),d["\u0275\u0275text"](116),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](117,"td"),d["\u0275\u0275text"](118),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](119,"td"),d["\u0275\u0275text"](120),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](121,"tr"),d["\u0275\u0275elementStart"](122,"th",32),d["\u0275\u0275text"](123,"2"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](124,"td"),d["\u0275\u0275text"](125),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](126,"td"),d["\u0275\u0275text"](127),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](128,"td"),d["\u0275\u0275text"](129),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](130,"tr"),d["\u0275\u0275elementStart"](131,"th",32),d["\u0275\u0275text"](132,"3"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](133,"td"),d["\u0275\u0275text"](134),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](135,"td"),d["\u0275\u0275text"](136),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](137,"td"),d["\u0275\u0275text"](138),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](139,"tr"),d["\u0275\u0275elementStart"](140,"th",32),d["\u0275\u0275text"](141,"4"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](142,"td"),d["\u0275\u0275text"](143),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](144,"td"),d["\u0275\u0275text"](145),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](146,"td"),d["\u0275\u0275text"](147),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](148,"tr"),d["\u0275\u0275elementStart"](149,"th",32),d["\u0275\u0275text"](150,"5"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](151,"td"),d["\u0275\u0275text"](152),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](153,"td"),d["\u0275\u0275text"](154),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](155,"td"),d["\u0275\u0275text"](156),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](157,"tr"),d["\u0275\u0275elementStart"](158,"th",32),d["\u0275\u0275text"](159,"6"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](160,"td"),d["\u0275\u0275text"](161),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](162,"td"),d["\u0275\u0275text"](163),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](164,"td"),d["\u0275\u0275text"](165),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](166,"tr"),d["\u0275\u0275elementStart"](167,"th",32),d["\u0275\u0275text"](168,"7"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](169,"td"),d["\u0275\u0275text"](170),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](171,"td"),d["\u0275\u0275text"](172),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](173,"td"),d["\u0275\u0275text"](174),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](175,"tr"),d["\u0275\u0275elementStart"](176,"th",32),d["\u0275\u0275text"](177,"8"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](178,"td"),d["\u0275\u0275text"](179),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](180,"td"),d["\u0275\u0275text"](181),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](182,"td"),d["\u0275\u0275text"](183),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](184,"div",1),d["\u0275\u0275elementStart"](185,"div",33),d["\u0275\u0275elementStart"](186,"p",34),d["\u0275\u0275elementStart"](187,"b"),d["\u0275\u0275text"](188),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e){var n=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](9),d["\u0275\u0275textInterpolate1"](" \xa0",n.waybill.wayBillNo,""),d["\u0275\u0275advance"](5),d["\u0275\u0275textInterpolate1"](" \xa0",n.waybill.dispatchOrderNumber,""),d["\u0275\u0275advance"](8),d["\u0275\u0275textInterpolate1"](" \xa0",null==n.waybill.truckDetails.transporter?null:n.waybill.truckDetails.transporter.name,""),d["\u0275\u0275advance"](5),d["\u0275\u0275textInterpolate1"](" \xa0",null==n.waybill.truckDetails.truckInfo?null:n.waybill.truckDetails.truckInfo.truckNumber,""),d["\u0275\u0275advance"](5),d["\u0275\u0275textInterpolate1"](" \xa0",null==n.waybill.truckDetails?null:n.waybill.truckDetails.driverName,""),d["\u0275\u0275advance"](8),d["\u0275\u0275textInterpolate1"](" \xa0",null==n.waybill.client?null:n.waybill.client.name,""),d["\u0275\u0275advance"](5),d["\u0275\u0275textInterpolate1"](" \xa0",n.waybill.referenceNumber,""),d["\u0275\u0275advance"](5),d["\u0275\u0275textInterpolate1"](" \xa0",d["\u0275\u0275pipeBind1"](51,47,n.waybill.createdDate),""),d["\u0275\u0275advance"](8),d["\u0275\u0275textInterpolate"](null==n.waybill?null:null==n.waybill.retailer?null:n.waybill.retailer.name),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](null==n.waybill?null:null==n.waybill.destinationAddress?null:n.waybill.destinationAddress.addressLine1),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](null==n.waybill?null:null==n.waybill.destinationAddress?null:n.waybill.destinationAddress.addressLine2),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate2"]("",null==n.waybill?null:null==n.waybill.destinationAddress?null:n.waybill.destinationAddress.city,", ",null==n.waybill?null:null==n.waybill.destinationAddress?null:n.waybill.destinationAddress.state,""),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate2"]("",null==n.waybill?null:null==n.waybill.destinationAddress?null:n.waybill.destinationAddress.country,", ",null==n.waybill?null:null==n.waybill.destinationAddress?null:n.waybill.destinationAddress.postCode,""),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](null==n.waybill?null:null==n.waybill.destinationAddress?null:n.waybill.destinationAddress.primaryIMEI),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",null==n.waybill?null:null==n.waybill.destinationAddress?null:n.waybill.destinationAddress.primaryPhoneNumber),d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate1"](" ",null==n.waybill?null:null==n.waybill.destinationAddress?null:n.waybill.destinationAddress.primaryPhoneNumber,""),d["\u0275\u0275advance"](8),d["\u0275\u0275textInterpolate1"](" \xa0",null==n.waybill?null:n.waybill.temperature,"\xa0 Deg Cel"),d["\u0275\u0275advance"](5),d["\u0275\u0275textInterpolate1"](" \xa0",null==n.waybill?null:n.waybill.density,"\xa0"),d["\u0275\u0275advance"](8),d["\u0275\u0275textInterpolate1"](" \xa0",null==n.waybill?null:n.waybill.estimatedTime,"\xa0"),d["\u0275\u0275advance"](5),d["\u0275\u0275textInterpolate1"](" \xa0",null==n.waybill?null:n.waybill.estimatedDistance," KMs\xa0"),d["\u0275\u0275advance"](19),d["\u0275\u0275textInterpolate"](n.waybill.quantity1),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate1"]("",n.waybill.ullage1," "),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](n.waybill.truckCompartmentSealNo1),d["\u0275\u0275advance"](5),d["\u0275\u0275textInterpolate"](n.waybill.quantity2),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate1"]("",n.waybill.ullage2," "),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](n.waybill.truckCompartmentSealNo2),d["\u0275\u0275advance"](5),d["\u0275\u0275textInterpolate"](n.waybill.quantity3),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate1"]("",n.waybill.ullage3," "),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](n.waybill.truckCompartmentSealNo3),d["\u0275\u0275advance"](5),d["\u0275\u0275textInterpolate"](n.waybill.quantity4),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate1"]("",n.waybill.ullage4," "),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](n.waybill.truckCompartmentSealNo4),d["\u0275\u0275advance"](5),d["\u0275\u0275textInterpolate"](n.waybill.quantity5),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate1"]("",n.waybill.ullage5," "),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](n.waybill.truckCompartmentSealNo5),d["\u0275\u0275advance"](5),d["\u0275\u0275textInterpolate"](n.waybill.quantity6),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate1"]("",n.waybill.ullage6," "),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](n.waybill.truckCompartmentSealNo6),d["\u0275\u0275advance"](5),d["\u0275\u0275textInterpolate"](n.waybill.quantity7),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate1"]("",n.waybill.ullage7," "),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](n.waybill.truckCompartmentSealNo7),d["\u0275\u0275advance"](5),d["\u0275\u0275textInterpolate"](n.waybill.quantity8),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate1"]("",n.waybill.ullage8," "),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](n.waybill.truckCompartmentSealNo8),d["\u0275\u0275advance"](5),d["\u0275\u0275textInterpolate1"]("Total quantity: \xa0\xa0\xa0 ",n.totalQuantity()," Liters")}}function x(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275element"](1,"app-spinner-wrapper",9),d["\u0275\u0275elementEnd"]()),2&e){var n=d["\u0275\u0275nextContext"](2);d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("showSpinner",n.showProgress)}}function g(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275element"](1,"app-spinner-wrapper",9),d["\u0275\u0275elementEnd"]()),2&e){var n=d["\u0275\u0275nextContext"](2);d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("showSpinner",n.showProgress)}}function C(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275element"](1,"app-spinner-wrapper",9),d["\u0275\u0275elementEnd"]()),2&e){var n=d["\u0275\u0275nextContext"](2);d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("showSpinner",n.showProgress)}}function N(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275elementStart"](1,"form",36),d["\u0275\u0275template"](2,x,2,1,"div",4),d["\u0275\u0275elementStart"](3,"div",37),d["\u0275\u0275elementStart"](4,"div",38),d["\u0275\u0275elementStart"](5,"h4",19),d["\u0275\u0275text"](6,"Waybill Info"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](7,"div",39),d["\u0275\u0275elementStart"](8,"label",40),d["\u0275\u0275text"](9,"Waybill Number"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](10,"input",41),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](11,"div",39),d["\u0275\u0275elementStart"](12,"label",42),d["\u0275\u0275text"](13,"Dispatch order number"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](14,"input",43),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](15,"div",44),d["\u0275\u0275elementStart"](16,"h4",19),d["\u0275\u0275text"](17,"\xa0"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](18,"div",39),d["\u0275\u0275elementStart"](19,"label",40),d["\u0275\u0275text"](20,"Temperaure"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](21,"div",45),d["\u0275\u0275element"](22,"input",46),d["\u0275\u0275elementStart"](23,"div",47),d["\u0275\u0275elementStart"](24,"span",48),d["\u0275\u0275text"](25,"Deg Celsius"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](26,"div",39),d["\u0275\u0275elementStart"](27,"label",49),d["\u0275\u0275text"](28,"Density"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](29,"input",50),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](30,"div",51),d["\u0275\u0275elementStart"](31,"h4",19),d["\u0275\u0275text"](32,"\xa0"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](33,"div",52),d["\u0275\u0275elementStart"](34,"label",53),d["\u0275\u0275text"](35,"Owner"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](36,"label",54),d["\u0275\u0275text"](37),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](38,"div",55),d["\u0275\u0275elementStart"](39,"label",53),d["\u0275\u0275text"](40,"Reference number"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](41,"input",56),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](42,"div",23),d["\u0275\u0275elementStart"](43,"div",57),d["\u0275\u0275elementStart"](44,"div",38),d["\u0275\u0275elementStart"](45,"h5",19),d["\u0275\u0275text"](46,"Destination Address"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](47,"div",58),d["\u0275\u0275element"](48,"input",59),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](49,"div",60),d["\u0275\u0275elementStart"](50,"div",61),d["\u0275\u0275element"](51,"input",62),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](52,"div",61),d["\u0275\u0275element"](53,"input",63),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](54,"div",61),d["\u0275\u0275element"](55,"input",64),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](56,"div",61),d["\u0275\u0275element"](57,"input",65),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](58,"div",61),d["\u0275\u0275element"](59,"ng-select",66),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](60,"div",61),d["\u0275\u0275element"](61,"input",67),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](62,"div",68),d["\u0275\u0275elementStart"](63,"div",61),d["\u0275\u0275element"](64,"input",69),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](65,"div",61),d["\u0275\u0275element"](66,"input",70),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](67,"div",71),d["\u0275\u0275elementStart"](68,"h5",19),d["\u0275\u0275text"](69,"\xa0"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](70,"div",58),d["\u0275\u0275element"](71,"input",72),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](72,"div",58),d["\u0275\u0275element"](73,"input",73),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](74,"div",58),d["\u0275\u0275element"](75,"input",74),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](76,"div",75),d["\u0275\u0275elementStart"](77,"h5",19),d["\u0275\u0275text"](78,"Transportaton details"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](79,"div",58),d["\u0275\u0275element"](80,"input",76),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](81,"div",77),d["\u0275\u0275elementStart"](82,"div",61),d["\u0275\u0275element"](83,"input",78),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](84,"div",61),d["\u0275\u0275element"](85,"input",79),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](86,"div",80),d["\u0275\u0275element"](87,"input",81,82),d["\u0275\u0275elementStart"](89,"div",47),d["\u0275\u0275elementStart"](90,"button",83),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275reference"](88).toggle()})),d["\u0275\u0275element"](91,"i",84),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](92,"div",80),d["\u0275\u0275element"](93,"input",85,86),d["\u0275\u0275elementStart"](95,"div",47),d["\u0275\u0275elementStart"](96,"button",83),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275reference"](94).toggle()})),d["\u0275\u0275element"](97,"i",84),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](98,"div",0),d["\u0275\u0275elementStart"](99,"div",87),d["\u0275\u0275elementStart"](100,"table",88),d["\u0275\u0275elementStart"](101,"thead",30),d["\u0275\u0275elementStart"](102,"tr"),d["\u0275\u0275elementStart"](103,"th",31),d["\u0275\u0275text"](104,"#"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](105,"th",31),d["\u0275\u0275text"](106,"Quantity (liters)"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](107,"th",31),d["\u0275\u0275text"](108,"Ullage (mm)"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](109,"th",31),d["\u0275\u0275text"](110,"Seal Number"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](111,"tbody"),d["\u0275\u0275elementStart"](112,"tr"),d["\u0275\u0275elementStart"](113,"th",32),d["\u0275\u0275text"](114,"1"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](115,"td"),d["\u0275\u0275element"](116,"input",89),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](117,"td"),d["\u0275\u0275element"](118,"input",90),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](119,"td"),d["\u0275\u0275element"](120,"input",91),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](121,"tr"),d["\u0275\u0275elementStart"](122,"th",32),d["\u0275\u0275text"](123,"2"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](124,"td"),d["\u0275\u0275element"](125,"input",92),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](126,"td"),d["\u0275\u0275element"](127,"input",93),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](128,"td"),d["\u0275\u0275element"](129,"input",94),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](130,"tr"),d["\u0275\u0275elementStart"](131,"th",32),d["\u0275\u0275text"](132,"3"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](133,"td"),d["\u0275\u0275element"](134,"input",95),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](135,"td"),d["\u0275\u0275element"](136,"input",96),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](137,"td"),d["\u0275\u0275element"](138,"input",97),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](139,"tr"),d["\u0275\u0275elementStart"](140,"th",32),d["\u0275\u0275text"](141,"4"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](142,"td"),d["\u0275\u0275element"](143,"input",98),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](144,"td"),d["\u0275\u0275element"](145,"input",99),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](146,"td"),d["\u0275\u0275element"](147,"input",100),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](148,"tr"),d["\u0275\u0275elementStart"](149,"th",32),d["\u0275\u0275text"](150,"5"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](151,"td"),d["\u0275\u0275element"](152,"input",101),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](153,"td"),d["\u0275\u0275element"](154,"input",102),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](155,"td"),d["\u0275\u0275element"](156,"input",103),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](157,"tr"),d["\u0275\u0275elementStart"](158,"th",32),d["\u0275\u0275text"](159,"6"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](160,"td"),d["\u0275\u0275element"](161,"input",104),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](162,"td"),d["\u0275\u0275element"](163,"input",105),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](164,"td"),d["\u0275\u0275element"](165,"input",106),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](166,"tr"),d["\u0275\u0275elementStart"](167,"th",32),d["\u0275\u0275text"](168,"7"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](169,"td"),d["\u0275\u0275element"](170,"input",107),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](171,"td"),d["\u0275\u0275element"](172,"input",108),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](173,"td"),d["\u0275\u0275element"](174,"input",109),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](175,"tr"),d["\u0275\u0275elementStart"](176,"th",32),d["\u0275\u0275text"](177,"8"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](178,"td"),d["\u0275\u0275element"](179,"input",110),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](180,"td"),d["\u0275\u0275element"](181,"input",111),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](182,"td"),d["\u0275\u0275element"](183,"input",112),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](184,"div",1),d["\u0275\u0275elementStart"](185,"div",113),d["\u0275\u0275elementStart"](186,"h5",114),d["\u0275\u0275elementStart"](187,"span"),d["\u0275\u0275text"](188),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](189,g,2,1,"div",4),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](190,C,2,1,"div",4),d["\u0275\u0275elementEnd"]()}if(2&e){var l=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("formGroup",l.waybillForm),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",l.showProgress),d["\u0275\u0275advance"](35),d["\u0275\u0275textInterpolate"](null==l.waybill.client?null:l.waybill.client.name),d["\u0275\u0275advance"](22),d["\u0275\u0275property"]("items",l.countries$)("multiple",!1)("searchable",!0),d["\u0275\u0275advance"](129),d["\u0275\u0275textInterpolate1"]("Total quantity: ",l.totalQuantity(),""),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",l.showProgress),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",l.showProgress)}}var I=function(){function e(e,t,n,r,a){this.waybillService=e,this.fb=t,this.constant=n,this.dl=r,this.toastr=a,this.action=m.a.READ_ONLY,this.waybill=new l.a,this.viewMode="print",this.showProgress=!0}return e.prototype.ngOnInit=function(){var e=this;this.isNew=!this.waybillId,this.showProgress=!0,this.dl.getCountries().subscribe((function(t){e.countries$=t})),this.isNew?(this.viewMode="edit",this.waybillService.loadDispatchDetails(this.dispatchId,this.dispatchTruckId).subscribe((function(t){e.waybill=t,e.buildFormForNewWaybill(e.waybill),e.getStatusText(),e.showProgress=!1}),(function(t){JSON.parse(t.error),e.showProgress=!1,e.toastr.error("err.errorMessage","Failed",{timeOut:4e3})}))):this.waybillService.getAllWaybillById(this.waybillId).subscribe((function(t){e.waybill=t,e.buildFormForNewWaybill(e.waybill),e.getStatusText(),e.showProgress=!1}),(function(t){e.showProgress=!1;var n=JSON.parse(t.error);e.toastr.error(n.erroMessage,"Failed",{timeOut:3e3})})),this.waybillService.onWaybillPreviewLoad.subscribe((function(t){t&&(e.waybill=t.waybill,e.waybillId=e.waybill.id,e.getStatusText(),e.showProgress=!1)})),this.waybillService.onStatusChanged.subscribe((function(t){t&&e.waybillService.getAllWaybillById(e.waybillId).subscribe((function(t){e.waybill=t,e.buildFormForNewWaybill(e.waybill),e.getStatusText(),e.showProgress=!1}),(function(t){e.showProgress=!1;var n=JSON.parse(t.error);e.toastr.error(n.erroMessage,"Failed",{timeOut:3e3})}))}))},e.prototype.getStatusText=function(){switch(this.waybill.wayBillStatus){case"CANCELED":this.ribbonText="Canceled",this.ribbonClass="ribbon-cancelled";break;case"DELIVERED":this.ribbonText="Delivered",this.ribbonClass="ribbon-delivered";break;default:this.ribbonText="Draft",this.ribbonClass="ribbon-draft"}},e.prototype.buildFormForNewWaybill=function(e){this.waybillForm=this.fb.group({density:e.density,destinationAddress:this.fb.group({addressLine1:e.destinationAddress?e.destinationAddress.addressLine1:null,addressLine2:e.destinationAddress?e.destinationAddress.addressLine2:null,city:e.destinationAddress?e.destinationAddress.city:null,state:e.destinationAddress?e.destinationAddress.state:null,country:e.destinationAddress?e.destinationAddress.country:null,postCode:e.destinationAddress?e.destinationAddress.postCode:null,primaryIMEI:e.destinationAddress?e.destinationAddress.primaryIMEI:null,primaryPhoneNumber:e.destinationAddress?e.destinationAddress.primaryPhoneNumber:null,secondaryIMEI:e.destinationAddress?e.destinationAddress.secondaryIMEI:null}),dischargeValve1SealNo:e.dischargeValve1SealNo,dischargeValve2SealNo:e.dischargeValve2SealNo,dischargeValve3SealNo:e.dischargeValve3SealNo,dispatchOrderNumber:e.dispatchOrderNumber,dispatchTruck:this.fb.group({id:e.dispatchTruck.id}),driverName:e.truckDetails.driverName,estimatedDistance:e.estimatedDistance,estimatedTime:e.estimatedTime,id:e.id,retailer:null,quantity1:e.quantity1,quantity2:e.quantity2,quantity3:e.quantity3,quantity4:e.quantity4,quantity5:e.quantity5,quantity6:e.quantity6,quantity7:e.quantity7,quantity8:e.quantity8,referenceNumber:e.referenceNumber,temperature:e.temperature,truckCalibrationDate:e.truckDetails.truckCalibrationDate,truckCalibrationExpirationDate:e.truckDetails.truckCalibrationExpirationDate,truckCompartmentSealNo1:e.truckCompartmentSealNo1,truckCompartmentSealNo2:e.truckCompartmentSealNo2,truckCompartmentSealNo3:e.truckCompartmentSealNo3,truckCompartmentSealNo4:e.truckCompartmentSealNo4,truckCompartmentSealNo5:e.truckCompartmentSealNo5,truckCompartmentSealNo6:e.truckCompartmentSealNo6,truckCompartmentSealNo7:e.truckCompartmentSealNo7,truckCompartmentSealNo8:e.truckCompartmentSealNo8,transporter:e.truckDetails.transporter.name,truckNumber:e.truckDetails.truckInfo.truckNumber,ullage1:0,ullage2:0,ullage3:0,ullage4:0,ullage5:0,ullage6:0,ullage7:0,ullage8:0,wayBillNo:e.wayBillNo})},e.prototype.buildInvoiceForm=function(e){var t=this;void 0===e&&(e={}),this.waybillForm=this.fb.group({id:[e.id],retailer:null,orderNumber:[e.orderNumber],orderStatus:[e.orderStatus],currency:[e.currency],vat:[e.vat],orderDate:[e.orderDate?a.a.dateToNgbDate(e.orderDate):{}],destinationAddress:this.fb.group({addressLine1:e.destinationAddress.addressLine1,addressLine2:e.destinationAddress.addressLine1,city:e.destinationAddress.city,state:e.destinationAddress.state,country:e.destinationAddress.country,postCode:e.destinationAddress.postCode,primaryIMEI:e.destinationAddress.primaryIMEI,primaryPhoneNumber:e.destinationAddress.primaryPhoneNumber,secondaryIMEI:e.destinationAddress.secondaryIMEI}),waybillStatus:null,quantity1:e.quantity1,quantity2:e.quantity2,quantity3:e.quantity3,quantity4:e.quantity4,quantity5:e.quantity5,quantity6:e.quantity6,quantity7:e.quantity7,quantity8:e.quantity8,ullage1:e.ullage1,ullage2:e.ullage2,ullage3:e.ullage3,ullage4:e.ullage4,ullage5:e.ullage5,ullage6:e.ullage6,ullage7:e.ullage7,ullage8:e.ullage8,driverName:e.driverName,items:this.fb.array(e.items?e.items.map((function(e){return t.createItem(e)})):[])})},e.prototype.createItem=function(e){return void 0===e&&(e={}),this.fb.group({name:[e.name],unit:[e.unit],unitPrice:[e.unitPrice]})},e.prototype.saveWaybill=function(){var e=this;this.showProgress=!0,this.waybill=this.waybillForm.value;var t=a.a.ngbDateToDate(this.waybillForm.get("truckCalibrationDate").value),n=a.a.ngbDateToDate(this.waybillForm.get("truckCalibrationExpirationDate").value);this.waybill.truckCalibrationDate=t,this.waybill.truckCalibrationExpirationDate=n,this.waybillService.create(this.waybill).subscribe((function(t){e.waybill=t,e.viewMode="print",e.toastr.success("Waybill created successfully","Success",{timeOut:5e3}),e.showProgress=!1}),(function(t){var n=JSON.parse(t.error);console.log(n),e.showProgress=!1}))},e.prototype.totalQuantity=function(){return this.waybill.quantity1+this.waybill.quantity2+this.waybill.quantity3+this.waybill.quantity4+this.waybill.quantity5+this.waybill.quantity6+this.waybill.quantity7+this.waybill.quantity8},e.prototype.calculateSubtotal=function(e){var t=0;return e.items.forEach((function(e){t+=e.unit*e.unitPrice})),t},e.prototype.print=function(){window&&window.print()},e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](r.a),d["\u0275\u0275directiveInject"](s.FormBuilder),d["\u0275\u0275directiveInject"](i.a),d["\u0275\u0275directiveInject"](o.a),d["\u0275\u0275directiveInject"](u.b))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["app-waybill-editor"]],inputs:{dispatchId:"dispatchId",dispatchTruckId:"dispatchTruckId",waybillId:"waybillId",action:"action"},decls:12,vars:9,consts:[[1,"row"],[1,"col-md-12"],[1,"card","mb-4"],[1,"card-body"],[4,"ngIf"],["class","d-flex mb-5",4,"ngIf"],["class","d-sm-flex mb-5",4,"ngIf"],["id","ember682",1,"ribbon","text-ellipsis","tooltip-container","ember-view"],["id","print-area",4,"ngIf"],[3,"showSpinner"],[1,"d-flex","mb-5"],[1,"m-auto"],[1,"btn","btn-outline-secondary","mr-3",3,"click"],["btnClass","btn-primary",3,"click"],[1,"d-sm-flex","mb-5"],[1,"btn","btn-primary","mb-sm-0","mb-3",3,"click"],["aria-hidden","true",1,"fa","fa-print","mr-2"],["id","print-area"],[1,"col-md-4","text-left"],[1,"font-weight-bold"],[1,"mb-0"],[1,"text-muted","mb-0","items-label","font-weight-400"],["clas","items-label text-dark font-weight-400"],[1,"mt-3","mb-4","border-top"],[1,"row","mb-5"],[1,"col-md-4","mb-3","mb-sm-0"],[1,"text-dark","mb-0","items-label","font-weight-400","text-left"],["class","fa fa-phone",4,"ngIf"],["clas","items-label text-dark font-weight-400 text-12"],[1,"table","table-hover","mb-4"],[1,"bg-gray-300"],["scope","col"],["scope","row"],[1,"waybill-summary","ml-2"],[1,"text-muted","items-label"],[1,"fa","fa-phone"],[3,"formGroup"],[1,"row","justify-content-between"],[1,"col-md-4"],[1,"col-sm-6","form-group","mb-3","pl-0"],["for","orderNo"],["formControlName","wayBillNo","type","text","id","orderNo","placeholder","Enter order number",1,"form-control"],["for","dispatchOrderNumber"],["formControlName","dispatchOrderNumber","type","text","id","dispatchOrderNumber","placeholder","Enter order number",1,"form-control"],[1,"col-md-5"],[1,"input-group","col-md-12","mb-3","pl-0","pr-0"],["type","text","formControlName","temperature",1,"form-control"],[1,"input-group-append"],["id","basic-addon1",1,"input-group-text"],["for","density"],["formControlName","density","type","text","id","density","placeholder","Enter density",1,"form-control"],[1,"col-md-3","mt-2"],[1,"form-group"],[1,"d-block","text-12","text-muted"],[1,"d-block","text-12","text-primary"],[1,"form-group","mt-4"],["formControlName","referenceNumber","type","text","id","referenceNumber","placeholder","Enter reference number",1,"form-control"],[1,"row","mb-5","justify-content-between"],[1,"col-md-12","form-group","mb-3","pl-0"],["formControlName","retailer","type","text","id","retailer","placeholder","Retailer name",1,"form-control"],["formGroupName","destinationAddress",1,"row","no-margin"],[1,"col-md-6","form-group","mb-3","pl-0"],["formControlName","addressLine1","type","text","id","billFrom","placeholder","Address Line 1",1,"form-control"],["formControlName","addressLine2","type","text","id","billFrom","placeholder","Address Line 2",1,"form-control"],["formControlName","city","type","text","id","city","placeholder","City",1,"form-control"],["formControlName","state","type","text","id","state","placeholder","State",1,"form-control"],["highlightColor","#b52725","bindLabel","display","bindValue","value","placeholder","Select country","formControlName","country",3,"items","multiple","searchable"],["type","text","id","postCode","formControlName","postCode","placeholder","Enter 6 digit post code",1,"form-control"],[1,"row","no-margin"],["type","text","id","estimatedDistance","formControlName","estimatedDistance","placeholder","Estimated distance (KM)",1,"form-control"],["type","text","id","estimatedTime","formControlName","estimatedTime","placeholder","Estimated time (HH:MM:SS)",1,"form-control"],[1,"col-md-2"],["type","text","id","dischargeValve1SealNo","formControlName","dischargeValve1SealNo","placeholder","Discharge valve 1",1,"form-control"],["type","text","id","dischargeValve2SealNo","formControlName","dischargeValve1SealNo","placeholder","Discharge valve 2",1,"form-control"],["type","text","id","dischargeValve3SealNo","formControlName","dischargeValve1SealNo","placeholder","Discharge valve 3",1,"form-control"],[1,"col-md-4","pull-right"],["formControlName","transporter","type","text","id","transporter","placeholder","Transporter name",1,"form-control"],[1,"form-group","row","no-margin"],["formControlName","truckNumber","type","text","id","truckNumber","placeholder","Truck number",1,"form-control"],["formControlName","driverName","type","text","id","driverName","placeholder","Driver name",1,"form-control"],[1,"input-group","col-md-6","pl-0"],["id","picker2","placeholder","Truck calibration date","name","dp3","ngbDatepicker","","formControlName","truckCalibrationDate",1,"form-control"],["dp3","ngbDatepicker"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"icon-regular","i-Calendar-4"],["id","picker2","placeholder","calibration expiry date","name","dp2","ngbDatepicker","","formControlName","truckCalibrationExpirationDate",1,"form-control"],["dp2","ngbDatepicker"],[1,"col-md-12","table-responsive"],[1,"table","table-hover","mb-3"],["formControlName","quantity1","type","text","placeholder","Quantity 1",1,"form-control"],["formControlName","ullage1","type","number","placeholder","Ullage 1",1,"form-control"],["formControlName","truckCompartmentSealNo1","type","number","placeholder","Truck compartment seal no 1",1,"form-control"],["formControlName","quantity2","type","text","placeholder","Quantity 2",1,"form-control"],["formControlName","ullage2","type","number","placeholder","Ullage 2",1,"form-control"],["formControlName","truckCompartmentSealNo2","type","number","placeholder","Truck compartment seal no 2",1,"form-control"],["formControlName","quantity3","type","text","placeholder","Quantity 3",1,"form-control"],["formControlName","ullage3","type","number","placeholder","Ullage 3",1,"form-control"],["formControlName","truckCompartmentSealNo3","type","number","placeholder","Truck compartment seal no 3",1,"form-control"],["formControlName","quantity4","type","text","placeholder","Quantity 4",1,"form-control"],["formControlName","ullage4","type","number","placeholder","Ullage 4",1,"form-control"],["formControlName","truckCompartmentSealNo4","type","number","placeholder","Truck compartment seal no 4",1,"form-control"],["formControlName","quantity5","type","text","placeholder","Quantity 5",1,"form-control"],["formControlName","ullage5","type","number","placeholder","Ullage 5",1,"form-control"],["formControlName","truckCompartmentSealNo5","type","number","placeholder","Truck compartment seal no 5",1,"form-control"],["formControlName","quantity6","type","text","placeholder","Quantity 6",1,"form-control"],["formControlName","ullage6","type","number","placeholder","Ullage 6",1,"form-control"],["formControlName","truckCompartmentSealNo6","type","number","placeholder","Truck compartment seal no 6",1,"form-control"],["formControlName","quantity7","type","text","placeholder","Quantity 7",1,"form-control"],["formControlName","ullage7","type","number","placeholder","Ullage 7",1,"form-control"],["formControlName","truckCompartmentSealNo7","type","number","placeholder","Truck compartment seal no 7",1,"form-control"],["formControlName","quantity8","type","text","placeholder","Quantity 8",1,"form-control"],["formControlName","ullage8","type","number","placeholder","Ullage 8",1,"form-control"],["formControlName","truckCompartmentSealNo8","type","number","placeholder","Truck compartment seal no 8",1,"form-control"],[1,"invoice-summary","invoice-summary-input"],[1,"font-weight-bold","d-flex","align-items-center","text-primary"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div",0),d["\u0275\u0275elementStart"](1,"div",1),d["\u0275\u0275elementStart"](2,"div",2),d["\u0275\u0275elementStart"](3,"div",3),d["\u0275\u0275template"](4,f,2,1,"div",4),d["\u0275\u0275template"](5,h,6,0,"div",5),d["\u0275\u0275template"](6,v,5,0,"div",6),d["\u0275\u0275elementStart"](7,"div",7),d["\u0275\u0275elementStart"](8,"div"),d["\u0275\u0275text"](9),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](10,E,189,49,"div",8),d["\u0275\u0275template"](11,N,191,9,"div",4),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](4),d["\u0275\u0275property"]("ngIf",t.showProgress),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf","edit"===t.viewMode),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf","edit"!==t.viewMode),d["\u0275\u0275advance"](2),d["\u0275\u0275classMapInterpolate1"]("ribbon-inner ",t.ribbonClass,""),d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate"](t.ribbonText),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf","edit"!==t.viewMode),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf","edit"===t.viewMode))},directives:[c.p,p.a,b.a,s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.FormGroupName,y.a,S.l,s.NumberValueAccessor],pipes:[c.f],styles:['.dropdown-menu.show[_ngcontent-%COMP%]{transform:translate(-65px,33px)!important;will-change:auto!important}.pt-10[_ngcontent-%COMP%]{padding-top:10px}.pt-20[_ngcontent-%COMP%]{padding-top:20px}.text-ellipsis[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ribbon[_ngcontent-%COMP%]{position:absolute!important;top:-5px;left:-5px;overflow:hidden;width:96px;height:94px}.ribbon[_ngcontent-%COMP%]   .ribbon-draft[_ngcontent-%COMP%]{background-color:#94a5a6;border-color:#788e8f}.ribbon[_ngcontent-%COMP%]   .ribbon-cancelled[_ngcontent-%COMP%]{background-color:#b52725;border-color:#b52725}.ribbon[_ngcontent-%COMP%]   .ribbon-delivered[_ngcontent-%COMP%]{background-color:green;border-color:green}.ribbon[_ngcontent-%COMP%]   .ribbon-inner[_ngcontent-%COMP%]{text-align:center;color:#fff;top:24px;left:-31px;width:135px;padding:3px;position:relative;transform:rotate(-45deg)}.ribbon[_ngcontent-%COMP%]   .ribbon-inner[_ngcontent-%COMP%]:after, .ribbon[_ngcontent-%COMP%]   .ribbon-inner[_ngcontent-%COMP%]:before{content:"";border-color:transparent transparent currentcolor currentcolor;border-style:solid;border-width:5px;border-bottom-color:inherit;position:absolute;top:20px;transform:rotate(-45deg)}.ribbon[_ngcontent-%COMP%]   .ribbon-inner[_ngcontent-%COMP%]:before{left:0;border-left:2px solid transparent}.ribbon[_ngcontent-%COMP%]   .ribbon-inner[_ngcontent-%COMP%]:after{right:-2px;border-bottom:3px solid transparent}.waybill-summary[_ngcontent-%COMP%]{width:226px}.waybill-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{flex:none}']}),e}()}}]);