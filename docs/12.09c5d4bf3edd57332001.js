(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{alHs:function(t,e,i){"use strict";i.d(e,"a",function(){return b}),i.d(e,"b",function(){return C});var n,o,s=i("1OyB"),r=i("vuIU"),a=i("9ac6"),l=i("SVse"),h=i("8Y7J"),u=i("cUpR"),c=i("s7LF"),d=[[["","quill-editor-toolbar",""]]],f=["[quill-editor-toolbar]"],m={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},p=new h.r("config"),g=null,v=function(t,e){return t||e||"html"},b=function(){var t=n=function(){function t(e,i,n,o,r,a,l){var u=this;Object(s.a)(this,t),this.elementRef=e,this.domSanitizer=i,this.doc=n,this.platformId=o,this.renderer=r,this.zone=a,this.config=l,this.required=!1,this.customToolbarPosition="top",this.sanitize=!1,this.styles=null,this.strict=!0,this.customOptions=[],this.preserveWhitespace=!1,this.onEditorCreated=new h.o,this.onContentChanged=new h.o,this.onSelectionChanged=new h.o,this.onFocus=new h.o,this.onBlur=new h.o,this.disabled=!1,this.valueGetter=function(t,e){var i=e.querySelector(".ql-editor").innerHTML;"<p><br></p>"!==i&&"<div><br><div>"!==i||(i=null);var n=i,o=v(u.format,u.config.format);if("text"===o)n=t.getText();else if("object"===o)n=t.getContents();else if("json"===o)try{n=JSON.stringify(t.getContents())}catch(s){n=t.getText()}return n},this.valueSetter=function(t,e){var i=v(u.format,u.config.format);if("html"===i)return u.sanitize&&(e=u.domSanitizer.sanitize(h.J.HTML,e)),t.clipboard.convert(e);if("json"===i)try{return JSON.parse(e)}catch(n){return[{insert:e}]}return e},this.selectionChangeHandler=function(t,e,i){u.zone.run(function(){null===t?u.onBlur.emit({editor:u.quillEditor,source:i}):null===e&&u.onFocus.emit({editor:u.quillEditor,source:i}),u.onSelectionChanged.emit({editor:u.quillEditor,oldRange:e,range:t,source:i}),!t&&u.onModelTouched&&u.onModelTouched()})},this.textChangeHandler=function(t,e,i){var n=u.quillEditor.getText(),o=u.quillEditor.getContents(),s=u.editorElem.querySelector(".ql-editor").innerHTML;"<p><br></p>"!==s&&"<div><br><div>"!==s||(s=null),u.zone.run(function(){var r=u.trackChanges||u.config.trackChanges;(i===g.sources.USER||r&&"all"===r)&&u.onModelChange&&u.onModelChange(u.valueGetter(u.quillEditor,u.editorElem)),u.onContentChanged.emit({content:o,delta:t,editor:u.quillEditor,html:s,oldDelta:e,source:i,text:n})})}}return Object(r.a)(t,[{key:"onModelChange",value:function(t){}},{key:"onModelTouched",value:function(){}},{key:"ngAfterContentInit",value:function(){var t=this;if(!Object(l.P)(this.platformId)){g||(g=i("kzlf")),this.elementRef.nativeElement.insertAdjacentHTML("top"===this.customToolbarPosition?"beforeend":"afterbegin",this.preserveWhitespace?"<pre quill-editor-element></pre>":"<div quill-editor-element></div>"),this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");var e=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),n=this.modules||this.config.modules||m;void 0===n.toolbar&&(n.toolbar=m.toolbar);var o=void 0!==this.placeholder?this.placeholder:this.config.placeholder;void 0===o&&(o="Insert text here ..."),e&&(n.toolbar=e),this.styles&&Object.keys(this.styles).forEach(function(e){t.renderer.setStyle(t.editorElem,e,t.styles[e])}),this.customOptions.forEach(function(t){var e=g.import(t.import);e.whitelist=t.whitelist,g.register(e,!0)});var s=this.bounds&&"self"===this.bounds?this.editorElem:this.bounds;s||(s=this.config.bounds?this.config.bounds:this.doc.body);var r=this.debug;!r&&!1!==r&&this.config.debug&&(r=this.config.debug);var a=this.readOnly;a||!1===this.readOnly||(a=void 0!==this.config.readOnly&&this.config.readOnly);var u=this.scrollingContainer;u||null===this.scrollingContainer||(u=null===this.config.scrollingContainer||this.config.scrollingContainer?this.config.scrollingContainer:null);var c=this.formats;if(c||void 0!==c||(c=this.config.formats||null===this.config.formats?this.config.formats:void 0),this.quillEditor=new g(this.editorElem,{bounds:s,debug:r,formats:c,modules:n,placeholder:o,readOnly:a,scrollingContainer:u,strict:this.strict,theme:this.theme||(this.config.theme?this.config.theme:"snow")}),this.content){var d=v(this.format,this.config.format);if("object"===d)this.quillEditor.setContents(this.content,"silent");else if("text"===d)this.quillEditor.setText(this.content,"silent");else if("json"===d)try{this.quillEditor.setContents(JSON.parse(this.content),"silent")}catch(p){this.quillEditor.setText(this.content,"silent")}else{this.sanitize&&(this.content=this.domSanitizer.sanitize(h.J.HTML,this.content));var f=this.quillEditor.clipboard.convert(this.content);this.quillEditor.setContents(f,"silent")}this.quillEditor.history.clear()}this.setDisabledState(),this.quillEditor.on("selection-change",this.selectionChangeHandler),this.quillEditor.on("text-change",this.textChangeHandler),setTimeout(function(){return t.onEditorCreated.emit(t.quillEditor)})}}},{key:"ngOnDestroy",value:function(){this.quillEditor&&(this.quillEditor.off("selection-change",this.selectionChangeHandler),this.quillEditor.off("text-change",this.textChangeHandler))}},{key:"ngOnChanges",value:function(t){var e=this;if(this.quillEditor&&(t.readOnly&&this.quillEditor.enable(!t.readOnly.currentValue),t.placeholder&&(this.quillEditor.root.dataset.placeholder=t.placeholder.currentValue),t.styles)){var i=t.styles.currentValue,n=t.styles.previousValue;n&&Object.keys(n).forEach(function(t){e.renderer.removeStyle(e.editorElem,t)}),i&&Object.keys(i).forEach(function(t){e.renderer.setStyle(e.editorElem,t,e.styles[t])})}}},{key:"writeValue",value:function(t){this.content=t;var e=v(this.format,this.config.format);if(this.quillEditor){if(t)return void("text"===e?this.quillEditor.setText(t):this.quillEditor.setContents(this.valueSetter(this.quillEditor,this.content)));this.quillEditor.setText("")}}},{key:"setDisabledState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.disabled;this.disabled=t,this.quillEditor&&(t?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}},{key:"registerOnChange",value:function(t){this.onModelChange=t}},{key:"registerOnTouched",value:function(t){this.onModelTouched=t}},{key:"validate",value:function(){if(!this.quillEditor)return null;var t={},e=!0,i=this.quillEditor.getText().trim().length;return this.minLength&&i&&i<this.minLength&&(t.minLengthError={given:i,minLength:this.minLength},e=!1),this.maxLength&&i>this.maxLength&&(t.maxLengthError={given:i,maxLength:this.maxLength},e=!1),this.required&&!i&&(t.requiredError={empty:!0},e=!1),e?null:t}}]),t}();return t.\u0275fac=function(e){return new(e||t)(h.Rb(h.m),h.Rb(u.b),h.Rb(l.e),h.Rb(h.C),h.Rb(h.F),h.Rb(h.A),h.Rb(p))},t.\u0275cmp=h.Lb({type:t,selectors:[["quill-editor"]],inputs:{required:"required",customToolbarPosition:"customToolbarPosition",sanitize:"sanitize",styles:"styles",strict:"strict",customOptions:"customOptions",preserveWhitespace:"preserveWhitespace",valueGetter:"valueGetter",valueSetter:"valueSetter",format:"format",theme:"theme",modules:"modules",debug:"debug",readOnly:"readOnly",placeholder:"placeholder",maxLength:"maxLength",minLength:"minLength",formats:"formats",scrollingContainer:"scrollingContainer",bounds:"bounds",trackChanges:"trackChanges"},outputs:{onEditorCreated:"onEditorCreated",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged",onFocus:"onFocus",onBlur:"onBlur"},features:[h.Cb([{multi:!0,provide:c.q,useExisting:Object(h.X)(function(){return n})},{multi:!0,provide:c.p,useExisting:Object(h.X)(function(){return n})}]),h.Bb],ngContentSelectors:f,decls:1,vars:0,template:function(t,e){1&t&&(h.qc(d),h.pc(0))},encapsulation:2}),t=n=Object(a.__decorate)([Object(a.__param)(2,Object(h.q)(l.e)),Object(a.__param)(3,Object(h.q)(h.C)),Object(a.__param)(6,Object(h.q)(p)),Object(a.__metadata)("design:paramtypes",[h.m,u.b,Object,Object,h.F,h.A,Object])],t)}(),C=function(){var t=o=function(){function t(){Object(s.a)(this,t)}return Object(r.a)(t,null,[{key:"forRoot",value:function(t){return{ngModule:o,providers:[{provide:p,useValue:t||{modules:m}}]}}}]),t}();return t.\u0275mod=h.Pb({type:t}),t.\u0275inj=h.Ob({factory:function(e){return new(e||t)},providers:[],imports:[[l.c]]}),t}()},g9P2:function(t,e,i){"use strict";var n=i("kzlf"),o=i.n(n);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t,e,i){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(i):o.value}})(t,e,i||t)}function f(t,e,i){var n=t;return Object.keys(e).forEach(function(t){i.indexOf(t)>-1?n.dataset[t]=e[t]:delete n.dataset[t]}),n}var m=function(t){function e(){return s(this,e),c(this,h(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,t),a(e,null,[{key:"create",value:function(t){var i=d(h(e),"create",this).call(this),n=document.createElement("span");return n.className="ql-mention-denotation-char",n.innerHTML=t.denotationChar,i.appendChild(n),i.innerHTML+=t.value,e.setDataValues(i,t)}},{key:"setDataValues",value:function(t,e){var i=t;return Object.keys(e).forEach(function(t){i.dataset[t]=e[t]}),i}},{key:"value",value:function(t){return t.dataset}}]),e}(o.a.import("blots/embed"));m.blotName="mention",m.tagName="span",m.className="mention",o.a.register(m),o.a.register("modules/mention",function(){function t(e,i){s(this,t),this.isOpen=!1,this.itemIndex=0,this.mentionCharPos=null,this.cursorPos=null,this.values=[],this.suspendMouseEnter=!1,this.quill=e,this.options={source:null,renderItem:function(t){return"".concat(t.value)},onSelect:function(t,e){e(t)},mentionDenotationChars:["@"],showDenotationChar:!0,allowedChars:/^[a-zA-Z0-9_]*$/,minChars:0,maxChars:31,offsetTop:2,offsetLeft:0,isolateCharacter:!1,fixMentionsToQuill:!1,defaultMenuOrientation:"bottom",dataAttributes:["id","value","denotationChar","link","target"],linkTarget:"_blank",onOpen:function(){return!0},onClose:function(){return!0},listItemClass:"ql-mention-list-item",mentionContainerClass:"ql-mention-list-container",mentionListClass:"ql-mention-list",spaceAfterInsert:!0},l(this.options,i,{dataAttributes:Array.isArray(i.dataAttributes)?this.options.dataAttributes.concat(i.dataAttributes):this.options.dataAttributes}),this.mentionContainer=document.createElement("div"),this.mentionContainer.className=this.options.mentionContainerClass?this.options.mentionContainerClass:"",this.mentionContainer.style.cssText="display: none; position: absolute;",this.mentionContainer.onmousemove=this.onContainerMouseMove.bind(this),this.options.fixMentionsToQuill&&(this.mentionContainer.style.width="auto"),this.mentionList=document.createElement("ul"),this.mentionList.className=this.options.mentionListClass?this.options.mentionListClass:"",this.mentionContainer.appendChild(this.mentionList),this.quill.container.appendChild(this.mentionContainer),e.on("text-change",this.onTextChange.bind(this)),e.on("selection-change",this.onSelectionChange.bind(this)),e.keyboard.addBinding({key:9},this.selectHandler.bind(this)),e.keyboard.bindings[9].unshift(e.keyboard.bindings[9].pop()),e.keyboard.addBinding({key:13},this.selectHandler.bind(this)),e.keyboard.bindings[13].unshift(e.keyboard.bindings[13].pop()),e.keyboard.addBinding({key:27},this.escapeHandler.bind(this)),e.keyboard.addBinding({key:38},this.upHandler.bind(this)),e.keyboard.addBinding({key:40},this.downHandler.bind(this))}return a(t,[{key:"selectHandler",value:function(){return!this.isOpen||(this.selectItem(),!1)}},{key:"escapeHandler",value:function(){return!this.isOpen||(this.hideMentionList(),!1)}},{key:"upHandler",value:function(){return!this.isOpen||(this.prevItem(),!1)}},{key:"downHandler",value:function(){return!this.isOpen||(this.nextItem(),!1)}},{key:"showMentionList",value:function(){this.mentionContainer.style.visibility="hidden",this.mentionContainer.style.display="",this.setMentionContainerPosition(),this.setIsOpen(!0)}},{key:"hideMentionList",value:function(){this.mentionContainer.style.display="none",this.setIsOpen(!1)}},{key:"highlightItem",value:function(){for(var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=0;e<this.mentionList.childNodes.length;e+=1)this.mentionList.childNodes[e].classList.remove("selected");if(this.mentionList.childNodes[this.itemIndex].classList.add("selected"),t){var i=this.mentionList.childNodes[this.itemIndex].offsetHeight,n=this.itemIndex*i,o=this.mentionContainer.scrollTop,s=o+this.mentionContainer.offsetHeight;n<o?this.mentionContainer.scrollTop=n:n>s-i&&(this.mentionContainer.scrollTop+=n-s+i)}}},{key:"getItemData",value:function(){var t=this.mentionList.childNodes[this.itemIndex].dataset.link,e=this.mentionList.childNodes[this.itemIndex].dataset.target;return void 0!==t&&(this.mentionList.childNodes[this.itemIndex].dataset.value='<a href="'.concat(t,'" target=').concat(e||this.options.linkTarget,">").concat(this.mentionList.childNodes[this.itemIndex].dataset.value)),this.mentionList.childNodes[this.itemIndex].dataset}},{key:"onContainerMouseMove",value:function(){this.suspendMouseEnter=!1}},{key:"selectItem",value:function(){var t=this,e=this.getItemData();this.options.onSelect(e,function(e){t.insertItem(e)}),this.hideMentionList()}},{key:"insertItem",value:function(t){var e=t;if(null!==e){this.options.showDenotationChar||(e.denotationChar="");var i=this.mentionCharPos;this.quill.deleteText(this.mentionCharPos,this.cursorPos-this.mentionCharPos,o.a.sources.USER),this.quill.insertEmbed(i,"mention",e,o.a.sources.USER),this.options.spaceAfterInsert?(this.quill.insertText(i+1," ",o.a.sources.USER),this.quill.setSelection(i+2,o.a.sources.USER)):this.quill.setSelection(i+1,o.a.sources.USER),this.hideMentionList()}}},{key:"onItemMouseEnter",value:function(t){if(!this.suspendMouseEnter){var e=Number(t.target.dataset.index);Number.isNaN(e)||e===this.itemIndex||(this.itemIndex=e,this.highlightItem(!1))}}},{key:"onItemClick",value:function(t){t.preventDefault(),t.stopImmediatePropagation(),this.itemIndex=t.currentTarget.dataset.index,this.highlightItem(),this.selectItem()}},{key:"renderList",value:function(t,e,i){if(e&&e.length>0){this.values=e,this.mentionList.innerHTML="";for(var n=0;n<e.length;n+=1){var o=document.createElement("li");o.className=this.options.listItemClass?this.options.listItemClass:"",o.dataset.index=n,o.innerHTML=this.options.renderItem(e[n],i),o.onmouseenter=this.onItemMouseEnter.bind(this),o.dataset.denotationChar=t,o.onclick=this.onItemClick.bind(this),this.mentionList.appendChild(f(o,e[n],this.options.dataAttributes))}this.itemIndex=0,this.highlightItem(),this.showMentionList()}else this.hideMentionList()}},{key:"nextItem",value:function(){this.itemIndex=(this.itemIndex+1)%this.values.length,this.suspendMouseEnter=!0,this.highlightItem()}},{key:"prevItem",value:function(){this.itemIndex=(this.itemIndex+this.values.length-1)%this.values.length,this.suspendMouseEnter=!0,this.highlightItem()}},{key:"containerBottomIsNotVisible",value:function(t,e){return t+this.mentionContainer.offsetHeight+e.top>window.pageYOffset+window.innerHeight}},{key:"containerRightIsNotVisible",value:function(t,e){return!this.options.fixMentionsToQuill&&t+this.mentionContainer.offsetWidth+e.left>window.pageXOffset+document.documentElement.clientWidth}},{key:"setIsOpen",value:function(t){this.isOpen!==t&&(t?this.options.onOpen():this.options.onClose(),this.isOpen=t)}},{key:"setMentionContainerPosition",value:function(){var t=this,e=this.quill.container.getBoundingClientRect(),i=this.quill.getBounds(this.mentionCharPos),n=this.mentionContainer.offsetHeight,o=this.options.offsetTop,s=this.options.offsetLeft;if(this.options.fixMentionsToQuill?this.mentionContainer.style.right="".concat(0,"px"):s+=i.left,this.containerRightIsNotVisible(s,e)&&(s=e.width-(this.mentionContainer.offsetWidth+this.options.offsetLeft)),"top"===this.options.defaultMenuOrientation){if((o=this.options.fixMentionsToQuill?-1*(n+this.options.offsetTop):i.top-(n+this.options.offsetTop))+e.top<=0){var r=this.options.offsetTop;o=r+=this.options.fixMentionsToQuill?e.height:i.bottom}}else if(this.containerBottomIsNotVisible(o+=this.options.fixMentionsToQuill?e.height:i.bottom,e)){var a=-1*this.options.offsetTop;this.options.fixMentionsToQuill||(a+=i.top),o=a-n}o>=0?this.options.mentionContainerClass.split(" ").forEach(function(e){t.mentionContainer.classList.add("".concat(e,"-bottom")),t.mentionContainer.classList.remove("".concat(e,"-top"))}):this.options.mentionContainerClass.split(" ").forEach(function(e){t.mentionContainer.classList.add("".concat(e,"-top")),t.mentionContainer.classList.remove("".concat(e,"-bottom"))}),this.mentionContainer.style.top="".concat(o,"px"),this.mentionContainer.style.left="".concat(s,"px"),this.mentionContainer.style.visibility="visible"}},{key:"getTextBeforeCursor",value:function(){var t=Math.max(0,this.cursorPos-this.options.maxChars);return this.quill.getText(t,this.cursorPos-t)}},{key:"onSomethingChange",value:function(){var t=this.quill.getSelection();if(null!=t){this.cursorPos=t.index;var e,i=this.getTextBeforeCursor(),n=(e=i,this.options.mentionDenotationChars.reduce(function(t,i){var n=e.lastIndexOf(i);return n>t.mentionCharIndex?{mentionChar:i,mentionCharIndex:n}:{mentionChar:t.mentionChar,mentionCharIndex:t.mentionCharIndex}},{mentionChar:null,mentionCharIndex:-1})),o=n.mentionChar,s=n.mentionCharIndex;if(function(t,e,i){return t>-1&&!(i&&0!==t&&!e[t-1].match(/\s/g))}(s,i,this.options.isolateCharacter)){this.mentionCharPos=this.cursorPos-(i.length-s);var r=i.substring(s+o.length);r.length>=this.options.minChars&&function(t,e){return e.test(t)}(r,this.options.allowedChars)?this.options.source(r,this.renderList.bind(this,o),o):this.hideMentionList()}else this.hideMentionList()}}},{key:"onTextChange",value:function(t,e,i){"user"===i&&this.onSomethingChange()}},{key:"onSelectionChange",value:function(t){t&&0===t.length?this.onSomethingChange():this.hideMentionList()}}]),t}())}}]);