(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{Iab2:function(e,t,n){var r,o;void 0===(o="function"==typeof(r=function(){"use strict";function t(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){a(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(e,a,i){var l=o.URL||o.webkitURL,s=document.createElement("a");s.download=a=a||e.name||"download",s.rel="noopener","string"==typeof e?(s.href=e,s.origin===location.origin?r(s):n(s.href)?t(e,a,i):r(s,s.target="_blank")):(s.href=l.createObjectURL(e),setTimeout((function(){l.revokeObjectURL(s.href)}),4e4),setTimeout((function(){r(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,o,a){if(o=o||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,a),o);else if(n(e))t(e,o,a);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout((function(){r(i)}))}}:function(e,n,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var i="application/octet-stream"===e.type,l=/constructor/i.test(o.HTMLElement)||o.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&l)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=s?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},c.readAsDataURL(e)}else{var p=o.URL||o.webkitURL,m=p.createObjectURL(e);a?a.location=m:location.href=m,a=null,setTimeout((function(){p.revokeObjectURL(m)}),4e4)}});o.saveAs=a.saveAs=a,e.exports=a})?r.apply(t,[]):r)||(e.exports=o)},"JC+x":function(e,t,n){"use strict";n.r(t);var r=n("Valr"),o=n("DUip"),a=n("Ujtm"),i=n("cUzu"),l=n("rXAn"),s=n("Iab2"),c=n("TYT/"),p=n("QJY3"),m=n("1PnN"),d=n("MnXN"),u=n("3rkx");function f(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"span",24),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](n);var e=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"](2).download(e)})),c["\u0275\u0275element"](1,"i",25),c["\u0275\u0275elementEnd"]()}}function g(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"tr"),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"td"),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"td"),c["\u0275\u0275text"](10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"td"),c["\u0275\u0275text"](12),c["\u0275\u0275pipe"](13,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"td"),c["\u0275\u0275template"](15,f,2,0,"span",23),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=t.index;c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",r+1," "),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",n.name," "),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",n.templateName," "),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",n.format," "),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",n.status," "),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind1"](13,7,n.generatedOn)," "),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf","SUCCESS"==n.status)}}function v(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",17),c["\u0275\u0275elementStart"](1,"table",18),c["\u0275\u0275elementStart"](2,"thead"),c["\u0275\u0275elementStart"](3,"tr"),c["\u0275\u0275elementStart"](4,"th",19),c["\u0275\u0275text"](5,"#"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"th",19),c["\u0275\u0275text"](7,"Reference"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"th",19),c["\u0275\u0275text"](9,"Report type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"th",19),c["\u0275\u0275text"](11,"Format"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"th",19),c["\u0275\u0275text"](13,"Status"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"th",19),c["\u0275\u0275text"](15,"Generated on"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"th",19),c["\u0275\u0275text"](17,"Action"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"tbody"),c["\u0275\u0275template"](19,g,16,9,"tr",20),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](20,"div",2),c["\u0275\u0275elementStart"](21,"div",21),c["\u0275\u0275elementStart"](22,"ngb-pagination",22),c["\u0275\u0275listener"]("pageChange",(function(e){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"]().page=e}))("pageChange",(function(e){return c["\u0275\u0275restoreView"](n),c["\u0275\u0275nextContext"]().getPageFromService(e)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){var r=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](19),c["\u0275\u0275property"]("ngForOf",r.reports),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("collectionSize",r.collectionSize)("page",r.page)("pageSize",r.pageSize)("maxSize",4)("ellipses",!0)("boundaryLinks",!0)}}function b(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275element"](1,"app-spinner-wrapper",26),c["\u0275\u0275elementEnd"]()),2&e){var n=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("showSpinner",n.showProgress)}}var h=function(){return{"w-100":!0}},S=[{path:"",component:function(){function e(e,t){this.fb=e,this.reportService=t,this.reports=[],this.formats=[{value:"XLS",display:"XLS"},{value:"PDF",display:"PDF"},{value:"DOC",display:"DOC"},{value:"HTML",display:"HTML"}],this.showProgress=!1,this.page=1,this.pageSize=8}return e.prototype.ngOnInit=function(){this.setUpForm(),this.loadGeneratedReports()},e.prototype.setUpForm=function(){this.genReportsForm=this.fb.group({format:null,reportName:null,reportType:null})},e.prototype.loadGeneratedReports=function(){var e=this;this.showProgress=!0,this.reportService.getGeneratedReports(this.page-1,this.pageSize).subscribe((function(t){e.reports=t.content,e.collectionSize=t.totalElements,e.showProgress=!1}),(function(t){e.showProgress=!1}))},Object.defineProperty(e.prototype,"f",{get:function(){return this.genReportsForm.controls},enumerable:!0,configurable:!0}),e.prototype.performAdvancedSearch=function(){var e=this;this.showProgress=!0;var t=this.genReportsForm.value;if(t){console.log(t);var n={params:(new i.f).set("format",t.format?t.format:"").set("reporName",t.reportName?t.reportName:"").set("reportType",t.reportType?t.reportType:"")};this.reportService.searchReports(0,8,n).subscribe((function(t){e.reports=t.content,e.collectionSize=t.totalElements,e.showProgress=!1}),(function(t){console.log(t.error),e.showProgress=!1}))}},e.prototype.getPageFromService=function(e){var t=this;this.showProgress=!0;var n=this.genReportsForm.value,r={params:(new i.f).set("format",n.format?n.format:"").set("reporName",n.reporName?n.reporName:"").set("reportType",n.toDate?n.toDate.toString():"")};this.reportService.searchReports(e-1,this.pageSize,r).subscribe((function(e){t.reports=e.content,t.collectionSize=e.totalElements,t.showProgress=!1}),(function(e){console.log(e.error),t.showProgress=!1}))},e.prototype.download=function(e){var t=this;this.showProgress=!0,this.reportService.getReportContent(e.id).subscribe((function(n){if(n){var r=n.name?n.name:"download."+e.format.toLowerCase();Object(s.saveAs)("data:application/text;base64,"+n.content,r),t.showProgress=!1}}))},e.prototype.clear=function(){this.genReportsForm.get("format").setValue(null),this.genReportsForm.get("reporName").setValue(null),this.genReportsForm.get("reportType").setValue(null)},e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](p.FormBuilder),c["\u0275\u0275directiveInject"](a.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-gen-reports"]],decls:30,vars:7,consts:[[1,""],[1,"breadcrumb"],[1,"separator-breadcrumb","border-top"],[1,"card","card-body","row","no-margin"],[3,"formGroup"],[1,"form-group","row","space-between"],[1,"col-3","p-1"],["type","text","formControlName","reportName",1,"form-control"],[1,"input-group"],["type","text","formControlName","reportType",1,"form-control"],["bindLabel","display","bindValue","value","placeholder","Select format","formControlName","format",3,"items","multiple","ngClass"],[1,"col-3","p-1","float-right","d-flex","align-items-center","mt-4"],[1,"btn","btn-primary",3,"click"],[1,"btn","ml-2",3,"click"],[1,"row","no-margin","mt-3"],["class","card card-body",4,"ngIf"],[4,"ngIf"],[1,"card","card-body"],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[1,"row","no-margin","pagination-div","border-rightr","justify-content-center"],["aria-label","Default pagination",3,"collectionSize","page","pageSize","maxSize","ellipses","boundaryLinks","pageChange"],["class","pointer",3,"click",4,"ngIf"],[1,"pointer",3,"click"],[1,"fa","fa-download"],[3,"showSpinner"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"h1"),c["\u0275\u0275text"](3,"Generated reports"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](4,"div",2),c["\u0275\u0275elementStart"](5,"div",3),c["\u0275\u0275elementStart"](6,"form",4),c["\u0275\u0275elementStart"](7,"div",5),c["\u0275\u0275elementStart"](8,"div",6),c["\u0275\u0275elementStart"](9,"label"),c["\u0275\u0275text"](10,"Report name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](11,"input",7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"div",6),c["\u0275\u0275elementStart"](13,"label"),c["\u0275\u0275text"](14,"Report type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"div",8),c["\u0275\u0275element"](16,"input",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"div",6),c["\u0275\u0275elementStart"](18,"label"),c["\u0275\u0275text"](19,"Format"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"div",8),c["\u0275\u0275element"](21,"ng-select",10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](22,"div",11),c["\u0275\u0275elementStart"](23,"button",12),c["\u0275\u0275listener"]("click",(function(){return t.performAdvancedSearch()})),c["\u0275\u0275text"](24,"Search"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"button",13),c["\u0275\u0275listener"]("click",(function(){return t.clear()})),c["\u0275\u0275text"](26,"Clear"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](27,"div",14),c["\u0275\u0275template"](28,v,23,7,"div",15),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](29,b,2,1,"div",16),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("formGroup",t.genReportsForm),c["\u0275\u0275advance"](15),c["\u0275\u0275property"]("items",t.formats)("multiple",!1)("ngClass",c["\u0275\u0275pureFunction0"](6,h)),c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("ngIf",t.reports),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.showProgress))},directives:[p["\u0275angular_packages_forms_forms_y"],p.NgControlStatusGroup,p.FormGroupDirective,p.DefaultValueAccessor,p.NgControlStatus,p.FormControlName,m.a,r.n,r.p,r.o,d.o,u.a],pipes:[r.f],styles:[".dropdown-menu.show[_ngcontent-%COMP%]{transform:translateY(33px)!important;will-change:auto!important}.justify-content-space-between[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.font1em[_ngcontent-%COMP%]{font-size:1em}"],data:{animation:[l.a]}}),e}()}],y=function(){function e(){}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.l.forChild(S)],o.l]}),e}(),w=n("jgPy"),E=n("oOf3");n.d(t,"GenReportsModule",(function(){return x}));var x=function(){function e(){}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.c,y,m.b,p.FormsModule,p.ReactiveFormsModule,d.n,w.a,E.a]]}),e}()},rXAn:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("2WDa"),o=Object(r.f)([Object(r.j)({opacity:"{{opacity}}",transform:"scale({{scale}}) translate3d({{x}}, {{y}}, {{z}})"}),Object(r.e)("{{duration}} {{delay}} cubic-bezier(0.0, 0.0, 0.2, 1)",Object(r.j)("*"))],{params:{duration:"200ms",delay:"0ms",opacity:"0",scale:"1",x:"0",y:"0",z:"0"}}),a=[Object(r.l)("animate",[Object(r.k)("void => *",[Object(r.m)(o)])]),Object(r.l)("fadeInOut",[Object(r.i)("0",Object(r.j)({opacity:0,display:"none"})),Object(r.i)("1",Object(r.j)({opacity:1,display:"block"})),Object(r.k)("0 => 1",Object(r.e)("300ms")),Object(r.k)("1 => 0",Object(r.e)("300ms"))])]}}]);